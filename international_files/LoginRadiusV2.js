(function(a,d,l){var q={required:"The %s field is required.",valid_phoneno:"The %s field is not valid.",custom_validation:"The %s field is required.",matches:"The %s field does not match the %s field.","default":"The %s field is still set to default, please change.",valid_email:"The %s field must contain a valid email address.",valid_emails:"The %s field must contain all valid email addresses.",min_length:"The %s field must be at least %s characters in length.",max_length:"The %s field must not exceed %s characters in length.",exact_length:"The %s field must be exactly %s characters in length.",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",numeric:"The %s field must contain only numbers.",integer:"The %s field must contain an integer.",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string.",valid_credit_card:"The %s field must contain a valid credit card number.",is_file_type:"The %s field must contain only %s files.",valid_url:"The %s field must contain a valid URL.",valid_ca_zip:"The %s field must contain a valid Postal Code."},m=function(a){},p=/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/,g=/^(\\+)|(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{1,14}$/,b=/^(.+?)\[(.+)\]$/,c=/^[0-9]+$/,e=/^\-?[0-9]+$/,f=/^\-?[0-9]*\.?[0-9]+$/,h=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,u=/^[a-z]+$/i,n=/^[a-z0-9]+$/i,w=/^[a-z0-9_\-]+$/i,k=/^[0-9]+$/i,t=/^[1-9][0-9]*$/i,B=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,D=/[^a-zA-Z0-9\/\+=]/i,F=/^[\d\-\s]+$/,A=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,z=function(a,b,c){this.callback=c||m;this.errors=[];this.fields={};this.form=this._formByNameOrNode(a)||{};this.messages={};this.handlers={};a=0;for(c=b.length;a<c;a++){var k=b[a];if((k.name||k.names)&&k.rules)if(k.names)for(var e=0;e<k.names.length;e++)this._addField(k,k.names[e]);else this._addField(k,k.name)}var f=this.form.onsubmit;this.form.onsubmit=function(a){return function(b){try{return a._validateForm(b)&&(f===l||f())}catch(L){}}}(this)},E=function(a,b){var k;if(0<a.length&&("radio"===a[0].type||"checkbox"===a[0].type))for(k=0;k<a.length;k++){if(a[k].checked)return a[k][b]}else return a[b]};z.prototype.setMessage=function(a,b){this.messages[a]=b;return this};z.prototype.registerCallback=function(a,b){a&&"string"===typeof a&&b&&"function"===typeof b&&(this.handlers[a]=b);return this};z.prototype._formByNameOrNode=function(a){return"object"===typeof a?a:d.forms[a]};z.prototype._addField=function(a,b){this.fields[b]={name:b,display:a.display||b,rules:a.rules,id:null,type:null,value:null,checked:null}};z.prototype._validateForm=function(a){this.errors=[];for(var b in this.fields)if(this.fields.hasOwnProperty(b)){var k=this.fields[b]||{},c=this.form[k.name];c&&c!==l&&(k.id=E(c,"id"),k.type=0<c.length?c[0].type:c.type,k.value=E(c,"value"),k.checked=E(c,"checked"),this._validateField(k))}"function"===typeof this.callback&&this.callback(this.errors,a);0<this.errors.length&&(a&&a.preventDefault?a.preventDefault():event&&(event.returnValue=!1));return!0};z.prototype._validateField=function(a){for(var k=a.rules.split("|"),c=a.rules.indexOf("required"),e=!a.value||""===a.value||a.value===l,f=0,h=k.length;f<h;f++){var n=k[f],t=null,d=!1,w=b.exec(n);if(-1!==c||-1!==n.indexOf("!callback_")||!e)if(w&&(n=w[1],t=w[2]),"!"===n.charAt(0)&&(n=n.substring(1,n.length)),"function"===typeof this._hooks[n]?this._hooks[n].apply(this,[a,t])||(d=!0):"callback_"===n.substring(0,9)&&(n=n.substring(9,n.length),"function"===typeof this.handlers[n]&&!1===this.handlers[n].apply(this,[a.value,t])&&(d=!0)),d){k=this.messages[n+"#"+a.name]||this.messages[n]||q[n];c="An error has occurred with the "+a.display+" field.";k&&(c=k.replace("%s",a.display),t&&((cu=0<=t.indexOf("###")&&t.split("###"))?cu[1]&&(c=cu[1]):c=c.replace("%s",this.fields[t]?this.fields[t].display:t)));this.errors.push({Id:a.id,Name:a.name,Message:c,Rule:n});break}}};z.prototype._hooks={required:function(a){var b=a.value.trim();return"checkbox"===a.type||"radio"===a.type?!0===a.checked:null!==b&&""!==b},"default":function(a,b){return a.value!==b},matches:function(a,b){var k=this.form[b];return k?a.value===k.value:!1},valid_ca_zip:function(a){return p.test(a.value)},custom_validation:function(a,b){var k=b.split("###")[0];k=k.split("or").join("|");return(new RegExp(k,"g")).test(a.value)},valid_email:function(a){return h.test(a.value)},valid_emails:function(a){a=a.value.split(",");for(var b=0;b<a.length;b++)if(!h.test(a[b]))return!1;return!0},min_length:function(a,b){return c.test(b)?a.value.length>=parseInt(b,10):!1},max_length:function(a,b){return c.test(b)?a.value.length<=parseInt(b,10):!1},exact_length:function(a,b){return c.test(b)?a.value.length===parseInt(b,10):!1},greater_than:function(a,b){return f.test(a.value)?parseFloat(a.value)>parseFloat(b):!1},less_than:function(a,b){return f.test(a.value)?parseFloat(a.value)<parseFloat(b):!1},alpha:function(a){return u.test(a.value)},alpha_numeric:function(a){return n.test(a.value)},alpha_dash:function(a){return w.test(a.value)},numeric:function(a){return c.test(a.value)},integer:function(a){return e.test(a.value)},decimal:function(a){return f.test(a.value)},is_natural:function(a){return k.test(a.value)},is_natural_no_zero:function(a){return t.test(a.value)},valid_ip:function(a){return B.test(a.value)},valid_phoneno:function(a){return g.test(a.value)},valid_base64:function(a){return D.test(a.value)},valid_url:function(a){return A.test(a.value)},valid_credit_card:function(a){if(!F.test(a.value))return!1;var b=0,k=!1;a=a.value.replace(/\D/g,"");for(var c=a.length-1;0<=c;c--){var e=a.charAt(c);e=parseInt(e,10);k&&9<(e*=2)&&(e-=9);b+=e;k=!k}return 0===b%10},is_file_type:function(a,b){if("file"!==a.type)return!0;for(var k=a.value.substr(a.value.lastIndexOf(".")+1),c=b.split(","),e=!1,f=0,n=c.length;f<n;f++)k==c[f]&&(e=!0);return e}};a.FormValidator=z})(window,document);"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,d){var l=this.length>>>0,q=Number(d)||0;q=0>q?Math.ceil(q):Math.floor(q);for(0>q&&(q+=l);q<l;q++)if(q in this&&this[q]===a)return q;return-1});Array.prototype.filter||(Array.prototype.filter=function(a,d){if(void 0===this||null===this)throw new TypeError;var l=Object(this),q=l.length>>>0;if("function"!==typeof a)throw new TypeError;for(var m=[],p=0;p<q;p++)if(p in l){var g=l[p];a.call(d,g,p,l)&&m.push(g)}return m});(function(a,d){var l=function(){var d=function(){for(var d=a.location.hash?a.location.hash.substr(1).split("&"):[],g={},b=0;b<d.length;b++){var c=d[b].split("=");g[c[0]]=decodeURIComponent(c[1])}return g},m=function(d){var g=[],b;for(b in d)g.push(b+"="+encodeURIComponent(d[b]));a.location.hash=g.join("&")};return{get:function(a){var g=d();return a?g[a]:g},add:function(a){var g=d(),b;for(b in a)g[b]=a[b];m(g)},remove:function(a){a="string"==typeof a?[a]:a;for(var g=d(),b=0;b<a.length;b++)delete g[a[b]];m(g)},clear:function(){m({})}}}();a.hash=l})(window);var LoginRadiusDefaults={idPrefix:"loginradius-",classPrefix:"loginradius-",apiDomain:"https://api.loginradius.com/identity/v2",hubDomain:"hub.loginradius.com",cloudApiDomain:"https://cloud-api.loginradius.com/",configApiDomain:"https://config.lrcontent.com/ciam/",socialApiDomain:"https://api.loginradius.com/api/v2/",isRegFormSchemaLock:!1,isSecurityFormSchemaLock:!1,innerHTML:!1,autoFilledFieldforPasswordLesLogin:!1,socialRegFormId:"",lrResponseCounter:0,LRPhoneNo:"",lrCounterJwtResponse:"",lrCounterTokenResponse:"",storedTokenName:"LRTokenKey",storedTwoFAToken:"lr2fatok",storedOTPAuth:"lrotpauthver",storedGAAuth:"lrgaauthver",storedUidName:"lr-user-uid",tokenCookie:"lr-user--token",isSSOInitFired:!1,pingCount:1,messages:{tokenValid:{Message:"Access token is not valid",Description:"LoginRadius Access Token is invalid, please verify the authentication response",ErrorCode:905},twofaTokenValid:{Message:"Token is not valid",Description:"Your session is not valid."},disabledAccountLinking:"Account Linking disabled in your account",noSecurityQuestions:"There are no security questions for this application",invalidSott:"Something went wrong, please try again.",notValidMessage:"Error Message element not valid",passwordStrengthMessage:"Password strength meter configuration is not valid.",otpSent:"OTP Sent Successfully",vTokenError:{Message:"Verification token not found in query string."},notFound:"Data not found.",emailNotVerified:{Message:"The email is not verified, please verify the link in your email",Description:"The email is not verified, please verify the link in your email",ErrorCode:970},phoneNotVerified:{Message:"Phone number is not verified",Description:"The provided phone number is not verified, please use a verified phone number for login.",ErrorCode:1066},blockedUser:{Message:"User is blocked",Description:"This user is blocked by site admin",ErrorCode:991},unverifiedUser:{Message:"This Uid have only traditional unverified account",Description:"This Uid have only traditional unverified account",ErrorCode:1028}},buttonNames:{login:"Login",socialregistration:"Login",loginrequiredfieldsupdate:"Login",registration:"Register",verifyemail:"Verify",resetpassword:"Reset Password",sociallogin:"Login",otp:"Verify",twofaotp:"Verify",showqrcode:"Verify",updatephone:"Update",changephone:"Update",forgotpassword:"Send",securityquestions:"Get",changepassword:"Submit",resendemailverification:"Send",addemail:"Send",removeemail:"Send",changeusername:"Submit",profileeditor:"Update Profile",otplogin:"OTP",passwordlessloginbuttonlabel:"Email me a link to Sign In",passwordlessloginotpbuttonlabel:"Send an OTP to Sign In",createtwofactorauthentication:"2-Step Verification",sendotp:"Send OTP",resendotp:"Resend OTP",changenumber:"Change Number",backupcode:"Login",backupcodebutton:"Try another way to Sign In",disablegoogleauthenticator:"Disable Google Authenticator",disableotpauthenticator:"Disable OTP Authenticator",updatesecurityquestion:"Update Security Question",resetpwdbysecq:"Reset Password By SecurityQ",smartlogin:"Smart Login",validatecode:"Validate",onetouchlogin:"Login",progressiveprofiling:"Progressive Profiling"},options:{passwordlessLoginEmailTemplate:"",callbackUrl:window.location,callbackInsideSameWindow:"",callbackType:"",scope:"",loginUrl:"",deleteUrl:"",emailTemplate:"",verificationUrl:"",verificationEmailTemplate:"",resetPasswordEmailTemplate:"",resetPasswordConfirmationEmailTemplate:"",smartLoginRedirectUrl:"",autoLoginRedirectUrl:"",smartLoginEmailTemplate:"",autoLoginEmailTemplate:"",smsTemplate2FA:"",smsTemplateForgot:"",smsTemplateWelcome:"",smsTemplateOneTouchLoginWelcome:"",smsTemplateOneTouchLogin:"",passwordlessLoginSMSTemplate:"",smsTemplate2FAWelcome:"",smsTemplatePhoneVerification:"",smsTemplateUpdatePhone:"",welcomeEmailTemplate:"",onetouchLoginEmailTemplate:"",onetouchLoginRedirectUrl:"",resetPasswordUrl:"",templateName:"",debugMode:!1,tokenType:"lrtoken",integrationName:"",smartLoginPingCount:100,smartLoginPingInterval:5,maskSensitiveInput:!1,enableHeaderSott:!0,accessTokenResponse:!0,rbaOneclickEmailTemplate:"",rbaOTPSmsTemplate:"",rbaCityEmailTemplate:"",rbaCountryEmailTemplate:"",rbaBrowserEmailTemplate:"",rbaIpEmailTemplate:"",rbaCitySmsTemplate:"",rbaCountrySmsTemplate:"",rbaBrowserSmsTemplate:"",rbaIpSmsTemplate:"",setLRSession:!1},_uuidFormat:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i};function LoginRadiusUtility(a,d){function l(){if(!h&&(h=!0,u)){for(var a=0;a<u.length;a++)u[a].call(window,[]);u=[]}}function q(a){var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b&&b();a()}}function m(){if(!f){f=!0;document.addEventListener&&!e.opera&&document.addEventListener("DOMContentLoaded",l,!1);if(e.msie&&window==top)a:if(!h){try{document.documentElement.doScroll("left")}catch(w){break a}l()}e.opera&&document.addEventListener("DOMContentLoaded",function(){if(!h){for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].disabled)return;l()}},!1);if(e.safari){var a;(function(){if(!h&&("loaded"==document.readyState||"complete"==document.readyState)){if(void 0===a){for(var b=document.getElementsByTagName("link"),k=0;k<b.length;k++)"stylesheet"==b[k].getAttribute("rel")&&a++;b=document.getElementsByTagName("style");a+=b.length}document.styleSheets.length==a&&l()}})()}q(l)}}var p=LoginRadiusDefaults.buttonNames,g=this;g.elementById=function(b,c){var k=document.getElementById(b);if(k)return k;c||a.log("Unable to find id: "+b)};g.getHashParam=function(a){var b=window.location.hash.match(new RegExp(a+"=([^&]*)"));return window.location.hash&&null!=b?b[1]:g.getQueryParameterByName(a)};g.keysToLowerCase=function(a){for(var b,k=Object.keys(a),c=k.length,e={};c--;)b=k[c],e[b.toLowerCase()]=a[b],"object"==typeof e[b.toLowerCase()]&&null!=e[b.toLowerCase()]&&(e[b.toLowerCase()]=g.keysToLowerCase(e[b.toLowerCase()]));return e};g.elementsByClass=function(a,b){if(""!=a){b=b||document.body;for(var k=[],c=new RegExp("(^| )"+a+"( |$)"),e=b.getElementsByTagName("*"),f=0,h=e.length;f<h;f++)c.test(e[f].className)&&k.push(e[f]);return k}};g.getThisObjectName=function(){for(var b in a.global)if("frameElement"!=b&&"webkitStorageInfo"!=b&&"webkitIndexedDB"!=b&&a.global[b]==a)return b};g.isValidUrl=function(a){return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(a)?!0:!1};g.hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))};g.addclass=function(a,b){return g.hasClass(a,b)?!1:(a.className+=" "+b,!0)};g.serialize=function(b){if(b&&"FORM"===b.nodeName){var c,k=[];for(c=b.elements.length-1;0<=c;--c)if(""!==b.elements[c].name&&""!==b.elements[c].value.trim())switch("emailid"!==b.elements[c].name||a.options.usernameLogin||a.options.duplicateEmailWithUniqueUsername||(b.elements[c].value=b.elements[c].value.toLowerCase()),b.elements[c].nodeName){case "INPUT":switch(b.elements[c].type){case "text":case "hidden":case "button":case "reset":case "submit":case "email":var e=b.elements[c].name;"emailid"==e&&(e="email");b.elements[c].disabled||k.push(e+"="+encodeURIComponent(b.elements[c].value.trim()));break;case "password":k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].value));break;case "checkbox":k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].checked));break;case "radio":b.elements[c].checked&&k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].value))}break;case "TEXTAREA":k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].value.trim()));break;case "SELECT":switch(b.elements[c].type){case "select-one":k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].value.trim()));break;case "select-multiple":for(e=b.elements[c].options.length-1;0<=e;--e)b.elements[c].options[e].selected&&k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].options[e].value.trim()))}break;case "BUTTON":switch(b.elements[c].type){case "reset":case "submit":case "button":k.push(b.elements[c].name+"="+encodeURIComponent(b.elements[c].value.trim()))}}return k.join("&")}};g.isSubstring=function(a,b){for(var c in b)if(-1!=b[c].indexOf(a))return c;return!1};g.addJs=function(a,b){b=b||document;var c=b.getElementsByTagName("head")[0],e=b.createElement("script");e.src=a;e.type="text/javascript";c.appendChild(e);return e};g.isJsonString=function(a){try{return JSON.parse(a)}catch(w){return!1}};g.hashTmpl=function t(a,c){var k=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<#").join("\t").replace(/((^|#>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)#>/g,"',$1,'").split("\t").join("');").split("#>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[a]=b[a]||(g.elementById(a)?t(g.elementById(a).innerHTML):"");return"function"==typeof k?c?k(c):k:""};g.addEvent=function(a,b,c){var k=[];b instanceof Array?k=b:k.push(b);for(b=0;b<k.length;b++)k[b]["on"+a]=c};var b={};g.tmpl=function B(a,c){var k=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[a]=b[a]||(g.elementById(a)?B(g.elementById(a).innerHTML):"");return"function"==typeof k?c?k(c):k:""};g.getQueryParameterByName=function(a,b){b="&"+(b||location.search);a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(b);return null==c?null:decodeURIComponent(c[1].replace(/\+/g," "))};g.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))};g.getQueryStringValue=function(a,b){var c=(new RegExp("[?&]"+b+"=([^&#]*)","i")).exec(a?a:window.location.href);return c?c[1]:null};g.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};var c=navigator.userAgent.toLowerCase(),e={version:(c.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(c),opera:/opera/.test(c),msie:(/msie/.test(c)||/trident/.test(c))&&!/opera/.test(c),mozilla:/mozilla/.test(c)&&!/(compatible|webkit)/.test(c)};g.browser=e;var f=!1,h=!1,u=[];g.ready=function(a,b){m();h?a.call(window,[]):u.push(function(){return a.call(window,[])})};g.jsonpCall=function(b,c,e,f){a.$hooks.call("startProcess",f);e=e||"Loginradius"+Math.floor(1E18*Math.random()+1);window[e]=function(b){c(b);a.$hooks.call("endProcess",f)};b=-1!=b.indexOf("?")?b+"&callback="+
e:b+"?callback="+e;g.addJs(b)};g.getButtonAttribute=function(b,c){var e=c||LoginRadiusDefaults.idPrefix;if(a.buttonElements[b]){var k=a.buttonElements[b];k=k.cloneNode(!0)}else k=document.createElement("input"),k.type="button",k.value=a.buttonsName[b]||p[b];k.id=e+"button-"+b;return k};g.ajaxCall=function(b,c,e,f,h,u){var k=this,t=h;h&&-1!=h.indexOf("##")&&(t=h.split("##")[1]);if(LoginRadiusDefaults._uuidFormat.test(d.apiKey)){a.$hooks.call("startProcess",h,e);try{var B=new XMLHttpRequest;if(a.options.projectionFields){var m=Object.keys(a.options.projectionFields),D=["verifyOTP","updateData"],A=!1,p=h;a.LRCheckRegistration?(A=-1!==D.indexOf(h),p="registration"):a.LRCheckLogin&&(A=-1!==D.indexOf(h),p="login");if(-1!==m.indexOf(h)||A){var l=a.options.projectionFields[p];if(l&&0<l.length){m="ErrorCode Profile/Uid Profile/IsDeleted access_token Profile/EmailVerified Profile/PhoneIdVerified Profile/PhoneId PhoneId PhoneIdVerified EmailVerified Uid IsDeleted".split(" ");(a.options.twoFactorAuthentication||a.options.optionalTwoFactorAuthentication)&&m.push("SecondFactorAuthentication/SecondFactorAuthenticationToken","SecondFactorAuthentication/IsOTPAuthenticatorVerified","SecondFactorAuthentication/IsGoogleAuthenticatorVerified","SecondFactorAuthentication/OTPPhoneNo","SecondFactorAuthentication/ManualEntryCode");l=g.mergeObjects(l,m,!0);m="&fields=";for(D=0;D<l.length;D++)m=D==l.length-1?m+l[D]:m+l[D]+",";c+=m}}}B.open(b,c,!0);-1==c.indexOf("cdn")&&-1==c.indexOf(".json")&&B.setRequestHeader("X-Requested-With","XMLHttpRequest");e.sottcheck&&(B.setRequestHeader("X-LoginRadius-Sott",a.options.sott),delete e.sottcheck);e?(e="string"===typeof e||e instanceof String?JSON.stringify(g.parseQueryString(e)):JSON.stringify(e),B.setRequestHeader("Content-Type","application/json"),B.send(e)):B.send(null);B.onreadystatechange=function(){if(4===B.readyState){var b=B.response;"500"==B.status&&(b=JSON.parse(b),b.ErrorCode="500",b=JSON.stringify(b));if(b=k.isJsonString(b))a.$hooks.call("successCallback",t,b,e),u?f(u,b):f(b);a.$hooks.call("endProcess",h)}}}catch(J){}}else a.log("apiKey is not in valid guid format.")};g.parseQueryString=function(a){var b={};if((a||""!=a)&&"string"===typeof a){a=a.split("&");for(var c=0;c<a.length;c++){var e=a[c].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}}return b};g.encodedString=function(a){-1==a.indexOf("%2B")&&(a=a.replace(/\+/g,"%2B"));return a};g.mergeOptions=function(a,b){var c={},e;for(e in a)c[e]=a[e];for(var k in b)c[k]=b[k];return c};g.mergeObjects=function(a,b,c){var e=[],k;for(k in a){for(var f in b)var h=c?b[f]==a[k]:b[f].name==a[k].name;if(h)break;e.push(a[k])}return e=e.concat(b)};g.openWindow=function(b){b=b||g.href;if(a.options.isMobile){var c="no";a.options.debugMode&&(c="yes");var e=window.open(b,"_blank","location="+c);e.addEventListener("loadstop",function(a){a=/[\?&]token=([^&#]*)/.exec(a.url);a=null===a?"":decodeURIComponent(a[1].replace(/\+/g," "));null!=a&&""!=a&&(e.close(),html5passToken(a))})}else{c=document.createElement("a");c.href=b;c=g.getQueryParameterByName("provider",c.search);var k="";a.options.noCallbackForSocialLogin&&(k=a.util.randomString(16),b+="&nocallback=true&callbackguid="+k);window.open(b,"lrpopupchildwindow",a.options.customizeSocialPopup||"menubar=1,resizable=1,width=450,height=450,scrollbars=1");a.$hooks.call("socialCalls",c,k);return!1}};g.isLocalStorageNameSupported=function(a){if(window[a]){a=window[a];try{return a.setItem("test","1"),a.removeItem("test"),!0}catch(t){return!1}}else return!1};g.setBrowserStorage=function(b,c){var e=!0;g.isLocalStorageNameSupported("localStorage")&&(localStorage.setItem(b,c),e=!1);g.isLocalStorageNameSupported("sessionStorage")&&(sessionStorage.setItem(b,c),e=!1);e&&a.documentCookies.setItem(b,c,"",a.options.appPath)};g.getBrowserStorage=function(b){if(b==LoginRadiusDefaults.storedTokenName){var c=g.getBrowserStorage("lr-session-token");if(c)return c=c.replace(/"/g,""),g.setBrowserStorage(LoginRadiusDefaults.storedTokenName,c),c}return g.isLocalStorageNameSupported("localStorage")&&null!==localStorage.getItem(b)&&void 0!==localStorage.getItem(b)&&""!==localStorage.getItem(b)?localStorage.getItem(b):g.isLocalStorageNameSupported("sessionStorage")&&null!==sessionStorage.getItem(b)&&void 0!==sessionStorage.getItem(b)&&""!==sessionStorage.getItem(b)?sessionStorage.getItem(b):a.documentCookies.getItem(b)};g.removeBrowserStorage=function(b){var c=!0;g.isLocalStorageNameSupported("localStorage")&&(localStorage.removeItem(b),c=!1);g.isLocalStorageNameSupported("sessionStorage")&&(sessionStorage.removeItem(b),c=!1);c&&a.documentCookies.removeItem(b,a.options.appPath)};g.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};g.randomString=function(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");a||(a=Math.floor(Math.random()*b.length));for(var c="",e=0;e<a;e++)c+=b[Math.floor(Math.random()*b.length)];return c};g.findInSchema=function(a,b,c,e){for(var f=0;f<a.length;f++)if((e?a[f]&&a[f][b].toLowerCase():a[f]&&a[f][b])==c)return a[f];return null};g.jsonToQueryString=function(a){return Object.keys(a).map(function(b){if(a[b])return encodeURIComponent(b)+
"="+encodeURIComponent(a[b])}).join("&")};g.addHTMLContent=function(a,b,c,e,f){c=c||!1;var h=g.elementById(a);if(h||e)c||(h.innerHTML=""),e?(c=p[e.toLowerCase()],c=g.elementById((f||LoginRadiusDefaults.idPrefix)+"submit-"+c.toLowerCase().replace(/ /g,"-")),g.insertBefore(b,c)):h.appendChild(b);else if((f=g.elementsByClass(a))&&0<f.length)for(a=0;a<f.length;a++)c||(f[a].innerHTML=""),f[a].appendChild(b)};g.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)};g.addRecaptchaJS=function(b){window.grecaptcha||!a.options.v2Recaptcha&&!b?a.options.invisibleRecaptcha&&g.addJs("https://www.google.com/recaptcha/api.js"):a.options.v2RecaptchaLanguage?g.addJs("https://www.google.com/recaptcha/api.js?render=explicit&hl="+a.options.v2RecaptchaLanguage):g.addJs("https://www.google.com/recaptcha/api.js?render=explicit");(a.options.tencentCaptcha||a.options.tencentCaptchaAsFallback)&&g.addJs("https://ssl.captcha.qq.com/TCaptcha.js")};g.renderV2Recaptcha=function(b,c,e){var f,h=g.elementById(b);if(a.options.v2Recaptcha||c||a.options.invisibleRecaptcha||a.options.tencentCaptcha||a.options.tencentCaptchaAsFallback){window.grecaptcha&&h&&h.innerHTML&&grecaptcha.reset(window[b+"lr_recaptcha_widgets_idprefix"]);var k=setInterval(function(){f||(f=setInterval(function(){if(window.grecaptcha){if(h&&""==h.innerHTML){var c={sitekey:a.options.v2RecaptchaSiteKey||"6LeAiwITAAAAADlqb06JIGepBs8ZRo3OZ7C0W7U3",theme:"light",callback:function(a){h.style.display="block";e&&e(a)}};a.options.invisibleRecaptcha&&(c.size="invisible",c.callback="onCaptchaSubmit");window[b+"lr_recaptcha_widgets_idprefix"]=grecaptcha.render(b,c);clearInterval(f)}}else{b+="_tencent";if(c=document.getElementById(b))c.style.display="block";"undefined"!=typeof TencentCaptcha&&new TencentCaptcha(document.getElementById(b));clearInterval(f)}},1E3),clearInterval(k))},1E3)}};g.captchaSchema=function(b,c,e,f){if((a.options.v2Recaptcha||e)&&!g.elementById(b))c.push({type:"captcha",name:"g-recaptcha-response",html:'<div id="'+b+'" class="recaptcha_widget"></div>',display:"Captcha",rules:"required"});else if(a.options.invisibleRecaptcha&&!g.elementById(b)){var h=a.options.v2RecaptchaSiteKey||"6LeAiwITAAAAADlqb06JIGepBs8ZRo3OZ7C0W7U3",k="";"hide"==e&&(k="display:none");c.push({type:"captcha",name:"g-recaptcha-response",html:'<div id="'+b+'" style="'+k+'" class="g-recaptcha" data-sitekey="'+h+'" data-size="invisible" data-callback="onCaptchaSubmit"></div>',display:"Captcha",rules:""})}g.elementById(b)||!a.options.tencentCaptcha&&!a.options.tencentCaptchaAsFallback||(window.onTencentCaptchaSubmit=function(a){if(0==a.ret)if(f)f(a);else window.onTencentCaptchaSubmitCallback(a)},c.push({type:"captcha",name:"TencentCaptcha",html:"<div "+(e?"style=display:none; ":"")+' id= "'+b+'_tencent"  class="TencentCaptcha"  data-appid="'+a.options.tencentCaptchaAppid+'" data-cbfn="onTencentCaptchaSubmit"></div>',display:"Captcha",rules:""}))};g.checkPhoneOrEmailLogin=function(b){var c=g.parseQueryString(b);if(c.emailid||c.email)if(a.options.duplicateEmailWithUniqueUsername&&!c.username)b=b.replace("emailid","username").replace("email","username");else{c=c.emailid||c.email;var e=/^(\\+)|(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{8,14}$/;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(c)?b=b.replace("emailid","email"):a.options.phoneLogin&&e.test(c)?(b=b.replace("emailid","phone").replace("email","phone"),b+="phoneApi=1"):a.options.usernameLogin&&(b=b.replace("emailid","username").replace("email","username"))}return b}}
function LoginRadiusApiFramework(a,d){this.init=function(){a.LRApiFrameWork=!0};this.login=function(l,q,m){a.getAppConfiguration(function(){d.loginController(a.util.jsonToQueryString(l),null,q,m)})};this.otpLogin=function(l,q,m){a.getAppConfiguration(function(){d.loginOTPController(a.util.jsonToQueryString(l),null,q,m)})};this.twoFALogin=function(l,q,m,p,g,b,c,e){p=p||function(){};c=c||function(){};e=e||function(){};g=g||function(){};b=b||function(){};a.getAppConfiguration(function(){d.login2FAController(a.util.jsonToQueryString(l),null,q,m,"",c,e,p,g,b)})};this.registration=function(l,q,m,p,g,b){g=g||function(){};b=b||function(){};a.getAppConfiguration(function(){d.registrationController(q,null,m,p,"",l,g,b)})};this.forgotPassword=function(l,q,m){a.getAppConfiguration(function(){d.forgotPasswordController(a.util.jsonToQueryString(l),"",q,m)})};this.resetPassword=function(l,q,m){a.getAppConfiguration(function(){d.resetPasswordController(a.util.jsonToQueryString(l),q,m)})};this.emailVerification=function(l,q,m){a.getAppConfiguration(function(){d.emailVerificationController(l.vtoken,q,m)})};this.socialLogin=function(l,q,m,p,g,b){a.getAppConfiguration(function(){LRObject.LoginRadiusHostedPage&&LRObject.SSOinitFired||(p=p||function(){},g=g||function(){},d.socialLoginReceiveToken(l.token,b,q,m,null,p,g))})};this.resendEmailVerification=function(l,q,m){a.getAppConfiguration(function(){d.resendEmailVerificationController(a.util.jsonToQueryString(l),q,m)})};this.twoFAResendOTP=function(l,q,m){a.getAppConfiguration(function(){d.resendOTP2FAController(a.util.jsonToQueryString(l),q,m)})};this.twoFAVerifyOTP=function(l,q,m){a.getAppConfiguration(function(){d.verify2FAOTPController(a.util.jsonToQueryString(l),q,m)})};this.twoFAUpdatePhone=function(l,q,m,p,g,b,c){p=p||function(){};g=g||function(){};b=b||function(){};c=c||function(){};a.getAppConfiguration(function(){d.update2FAPhoneNumberController(l,null,q,m,null,p,g,b,c)})};this.updatePhone=function(l,q,m,p,g,b,c){b=b||function(){};c=c||function(){};p=p||function(){};g=g||function(){};a.getAppConfiguration(function(){d.updatePhoneNumberController(a.util.jsonToQueryString(l),null,q,m,null,b,c,p,g)})};this.verifyOTP=function(l,q,m,p){a.getAppConfiguration(function(){d.verifyOTPController(l,q,m,p)})};this.resendOTP=function(l,q,m){a.getAppConfiguration(function(){d.resendOTPController(a.util.jsonToQueryString(l),q,m)})};this.addEmail=function(l,q,m){a.getAppConfiguration(function(){d.addEmailController(a.util.jsonToQueryString(l),q,m)})};this.removeEmail=function(l,q,m){a.getAppConfiguration(function(){d.removeEmailController(a.util.jsonToQueryString(l),q,m)})};this.changeUsername=function(l,q,m){a.getAppConfiguration(function(){d.changeUsernameController(a.util.jsonToQueryString(l),q,m)})};this.changePassword=function(l,q,m){a.getAppConfiguration(function(){d.changePasswordController(a.util.jsonToQueryString(l),q,m)})};this.checkPhoneNumberAvailability=function(l,q,m){a.getAppConfiguration(function(){d.checkPhoneNumberAvailabilityController(a.util.jsonToQueryString(l),q,m)})};this.resetPasswordByPhone=function(l,q,m){a.getAppConfiguration(function(){d.resetPasswordByPhoneController(a.util.jsonToQueryString(l),q,m)})};this.forgotPasswordbyPhone=function(l,q,m){a.getAppConfiguration(function(){d.forgotPasswordbyPhoneController(a.util.jsonToQueryString(l),null,q,m)})};this.updateData=function(l,q,m,p,g,b){var c=p,e=g,f={};"object"==typeof p&&(f=p,c=g,e=b);var h={};h.Profile=f;h.access_token=m;a.getAppConfiguration(function(){d.updateData(h,null,a.util.jsonToQueryString(q),c,e,"",l)})};this.checkEmailAvailability=function(l,q,m){a.getAppConfiguration(function(){d.checkEmailAvailabilityController(a.util.jsonToQueryString(l),q,m)})};this.checkUserNameAvailability=function(l,q,m){a.getAppConfiguration(function(){d.checkUserNameAvailabilityController(a.util.jsonToQueryString(l),q,m)})};this.resetPasswordBySecurityQuestion=function(l,q,m){a.getAppConfiguration(function(){d.resetPasswordBySecurityQuestionController(a.util.jsonToQueryString(l),q,m)})};this.updateSecurityQuestion=function(l,q,m){a.getAppConfiguration(function(){d.updateSecurityQuestionController(a.util.jsonToQueryString(l),q,m)})};this.resetTwoFactor=function(l,q,m){a.getAppConfiguration(function(){d.resetTwoFactorAuthenticationController(l,q,m)})};this.invalidateToken=function(l,q,m){a.getAppConfiguration(function(){d.invalidateToken(l,q,m)})};this.validateToken=function(l,q,m){a.getAppConfiguration(function(){d.validateToken(l,q,m)})};this.getSocialData=function(l,q,m,p,g){a.getAppConfiguration(function(){d.getSocialDataController(l,q,m,p,g)})};this.postSocialData=function(l,q,m,p,g,b){a.getAppConfiguration(function(){d.postSocialDataController(l,q,m,p,g,b)})};this.getCustomObjects=function(l,q,m){a.getAppConfiguration(function(){d.getCustomObjectsController(l,q,m)})};this.createCustomObject=function(l,q,m,p){a.getAppConfiguration(function(){d.createCustomObjectController(l,q,m,p)})};this.getCustomObjectById=function(l,q,m,p){a.getAppConfiguration(function(){d.getCustomObjectByIdController(l,q,m,p)})};this.deleteCustomObjectById=function(l,q,m,p){a.getAppConfiguration(function(){d.deleteCustomObjectController(l,q,m,p)})};this.updateCustomObjectById=function(l,q,m,p,g,b){a.getAppConfiguration(function(){d.updateCustomObjectController(l,q,m,b,p,g)})};this.getBackupCode=function(l,q,m){a.getAppConfiguration(function(){d.getBackupCodeController(l,q,m)})};this.resetBackupCode=function(l,q,m){a.getAppConfiguration(function(){d.resetBackupCodeController(l,q,m)})};this.autoLogin=this.smartLogin=function(l,q,m){a.getAppConfiguration(function(){d.smartLoginController(a.util.jsonToQueryString(l),q,m)})}}
function setLoginRadiusDefaultSchema(a){a.loginFormSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required|valid_email",permission:"r"},{type:"password",name:"password",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"}];a.backupCodeFormSchema=[{type:"string",name:"backupcode",display:"Backup Code",rules:"required",permission:"r"}];a.resetPasswordByPhoneSchema=[{type:"string",name:"otp",display:"OTP",rules:"required",permission:"r"},{type:"password",name:"password",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"}];a.checkPhoneNumberSchema=[{type:"string",name:"phone",display:"Phone Number",rules:"required|valid_phoneno",permission:"r"}];a.QRCodeSchema=[{type:"string",name:"googleAuthenticatorCode",display:"Google Authenticator Code",rules:"required",permission:"r"}];a.getSecQSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required|valid_email",permission:"r"}];a.otpSchema=[{type:"string",name:"otp",display:"OTP",rules:"required",permission:"r"}];a.forgotPasswordFormSchema=[{type:"string",name:"emailid",display:"Email",rules:"required",permission:"r"}];a.smartLoginSchema=[{type:"string",name:"emailid",display:"Email Id",rules:"required",permission:"r"}];a.passwordLessLoginSchema=[{type:"string",name:"emailid",display:"Email",rules:"required",permission:"r"},{type:"string",name:"name",display:"Name",rules:"",permission:"r"}];a.changePasswordFormSchema=[{type:"password",name:"oldpassword",display:"Old Password",rules:"required|min_length[6]|max_length[32]",permission:"w"},{type:"password",name:"newpassword",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"},{type:"password",name:"confirmnewpassword",display:"Confirm Password",rules:"required|min_length[6]|max_length[32]|matches[newpassword]",permission:"w"}];a.emailSchema=a.forgotPasswordFormSchema;a.addEmailSchema=[{type:"string",name:"emailid",display:"Email",rules:"required|valid_email",permission:"r"},{type:"string",name:"type",display:"Type",rules:"required",permission:"r"}];a.changeUsernameFormSchema=[{type:"string",name:"username",display:"Username",rules:"required",permission:"r"}];a.resetPasswordFormSchema=[{type:"password",name:"password",display:"Password",rules:"required|min_length[6]|max_length[32]",permission:"w"},{type:"password",name:"confirmpassword",display:"Confirm Password",rules:"required|matches[password]|min_length[6]|max_length[32]",permission:"w"},{type:"hidden",name:"resettoken",display:"",rules:"required",permission:"w",value:""}]}
function setLoginRadiusModuleFunctions(a,d){function l(a){var c,e;d.securityQuestionEnabled=a.IsSecurityQuestion;d.appName=d.appName||a.AppName;d.RegistrationFormSchema=a.RegistrationFormSchema;d.loginLockedType=a.LoginLockedConfiguration&&a.LoginLockedConfiguration.LoginLockedType;d.securityQuestionEnabled&&(d.SecurityQuestions=a.SecurityQuestions.Questions,d.securityQuestionsCount=void 0==d.securityQuestionsCount?a.SecurityQuestions.SecurityQuestionCount:d.securityQuestionsCount);if(void 0==d.passwordLength&&d.displayPasswordStrength&&d.RegistrationFormSchema){var g=b.findInSchema(d.RegistrationFormSchema,"name","password").rules.split("|"),n=b.isSubstring("min_length[",Object.keys(g).map(function(a){return g[a]}));n=g[n].substring(g[n].lastIndexOf("min_length[")+11,g[n].lastIndexOf("]"));var w=b.isSubstring("max_length[",Object.keys(g).map(function(a){return g[a]}));w=g[w].substring(g[w].lastIndexOf("max_length[")+11,g[w].lastIndexOf("]"));n={min:parseInt(n),max:parseInt(w)};d.passwordLength=n}d.SocialSchema=a.SocialSchema;d.maskSensitiveInput=d.encryptedAnswer||d.maskSensitiveInput;d.noCallbackForSocialLogin=void 0!=d.noCallback?d.noCallback:d.noCallbackForSocialLogin;d.v2RecaptchaSiteKey=d.v2RecaptchaSiteKey||a.V2RecaptchaSiteKey;if(a.TwoFactorAuthentication.IsEnabled){var k=!0;var t=!1;var m=a.TwoFactorAuthentication.IsGoogleAuthenticator;a.TwoFactorAuthentication.IsRequired&&(k=!1,t=!0)}d.otpEmailVerification=void 0==d.otpEmailVerification?a.OTPEmailVerification:d.otpEmailVerification;d.optionalTwoFactorAuthentication=void 0==d.optionalTwoFactorAuthentication?k:d.optionalTwoFactorAuthentication;d.twoFactorAuthentication=void 0==d.twoFactorAuthentication?t:d.twoFactorAuthentication;d.googleAuthentication=void 0==d.googleAuthentication?m:d.googleAuthentication;d.phoneLogin=void 0==d.phoneLogin?a.IsPhoneLogin:d.phoneLogin;d.passwordlessLoginOTP=void 0==d.instantOTPLogin&&void 0==d.passwordlessLoginOTP?a.IsInstantSignin.SmsOtp:d.instantOTPLogin||d.passwordlessLoginOTP;"optional"==a.EmailVerificationFlow?c=!0:"disabled"==a.EmailVerificationFlow&&(e=!0);d.optionalEmailVerification=void 0==d.optionalEmailVerification?c:d.optionalEmailVerification;d.disabledEmailVerification=void 0==d.disabledEmailVerification?e:d.disabledEmailVerification;d.loginOnEmailVerification=void 0==d.loginOnEmailVerification?a.IsLoginOnEmailVerification:d.loginOnEmailVerification;d.passwordlessLogin=void 0==d.instantLinkLogin&&void 0==d.passwordlessLogin?a.IsInstantSignin.EmailLink:d.instantLinkLogin||d.passwordlessLogin;d.askRequiredFieldForTraditionalLogin=void 0==d.askRequiredFieldForTraditionalLogin?a.AskRequiredFieldsOnTraditionalLogin:d.askRequiredFieldForTraditionalLogin;d.stayLogin=void 0==d.stayLogin?a.IsRememberMe:d.stayLogin;d.disableSignup=void 0==d.disableSignup?a.IsDisabledRegistration:d.disableSignup;d.riskBasedAuthentication=void 0==d.riskBasedAuthentication?a.IsRiskBasedAuthentication:d.riskBasedAuthentication;d.noCallbackForSocialLogin=void 0==d.noCallbackForSocialLogin?a.IsNoCallbackForSocialLogin:d.noCallbackForSocialLogin;d.usernameLogin=void 0==d.usernameLogin?a.IsUserNameLogin:d.usernameLogin;d.promptPasswordOnSocialLogin=void 0==d.promptPasswordOnSocialLogin?a.AskPasswordOnSocialLogin:d.promptPasswordOnSocialLogin;d.v2Recaptcha=void 0==d.v2Recaptcha?a.IsV2Recaptcha:d.v2Recaptcha;d.invisibleRecaptcha=void 0==d.invisibleRecaptcha?a.IsInvisibleRecaptcha:d.invisibleRecaptcha;d.askOptionalFieldsOnRegistration=void 0==d.askOptionalFieldsOnRegistration?a.AskOptionalFieldsOnSocialSignup:d.askOptionalFieldsOnRegistration;d.askEmailForUnverifiedProfileAlways=void 0==d.askEmailForUnverifiedProfileAlways?a.AskEmailIdForUnverifiedUserLogin:d.askEmailForUnverifiedProfileAlways;d.logoutOnVerifyEmail=void 0==d.logoutOnVerifyEmail?a.IsLogoutOnEmailVerification:d.logoutOnVerifyEmail;d.disableAccountLinking=a.IsDisabledAccountLinking;d.duplicateEmailWithUniqueUsername=a.DuplicateEmailWithUniqueUsername;d.customDomain=d.customDomain||a.CustomDomain}function q(e){a.isApiCallingStarted||""!=a.options?a.isApiCallingStarted&&(""!=a.options?e():"logout"==a.useraction?(a.isApiCallingStarted=!1,q(e)):c.push(e)):(a.isApiCallingStarted=!0,c.push(e),b.ajaxCall("get",LoginRadiusDefaults.configApiDomain+"appInfo?apikey="+d.apiKey,"",function(e){l(e);d=b.mergeOptions(m,d);a.options=d;for(e=0;e<c.length;e++)c[e]()},"registrationSchema"))}var m=LoginRadiusDefaults.options,p=new setLoginRadiusCommonFunctions(a),g=new LoginRadiusControllers(a,p),b=a.util;a.version="3.0.7";a.LRCheckRegistration=!1;a.passwordlessLoginFlag=!1;a.socialLoginFlag=!1;a.LRCheckLogin=!1;a.LRCheck2FA=!1;a.loginAction=!1;a.options="";a.sessionData={getUid:function(){return b.getBrowserStorage(LoginRadiusDefaults.storedUidName)},getToken:function(){return b.getBrowserStorage(LoginRadiusDefaults.storedTokenName)}};a.errorMessages=[];a.validationMessages=[];a.formCustomLabel={};a.formElementsTitle={};a.defaultOptionField={};a.formValidations={};a.formPlaceholder={};a.formElementAttributes={};a.buttonElements={};a.passwordMeterConfiguration=[];a.buttonsName={};a.eventsName={};a.log=function(b){a.options.debugMode&&"undefined"!==typeof console&&console.log(b)};a.progressiveProfiling={};a.progressiveProfiling.init=function(){q(function(){a.util.ajaxCall("get",LoginRadiusDefaults.configApiDomain+"progressiveProfilingSchema?apikey="+a.options.apiKey+"&appName="+a.options.appName,"",function(b){a.progressiveProfilingSchema=b;a.$hooks.register("registrationSchemaFilter",function(b,c){a.options.progressiveProfilingTraditional&&(a.LoggedinSocialProvderProfile=c)})},"progressiveProfilingSchema")})};a.progressiveProfiling.execStep=function(c,f){if(a.progressiveProfilingSchema){var e=f.onSuccess||function(){},d=f.onError||function(){},n=f.container||"",w=f.classPrefix||"",k=f.templateName||"",t=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);t&&a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/socialidentity?apiKey="+a.options.apiKey+"&access_token="+t,"",function(f){var h=a.util.findInSchema(a.progressiveProfilingSchema.ProfilingSteps,"Step",c);if(h){var u={};u.Profile=f;u.access_token=t;var m=f.Provider.toLowerCase();if("email"==m||"raas"==m||a.options.progressiveProfilingTraditional){a.options.progressiveProfilingTraditional&&"email"!=m&&"raas"!=m&&(f=a.LoggedinSocialProvderProfile);var B=p.mapSchema(h.Schema,f);u.Profile=f;0<B.length?p.createForm(B,"progressiveProfiling",n,function(a){g.updateData(u,n,a,e,d,w,B,"progressiveProfiling")},function(a){d(a)},w):p.loginHandleToken(u,"",e,d)}else(f=b.findInSchema(h.Scopes,"Provider",m,!0))?(h=[],h.push({Name:m,Endpoint:"https://"+(a.options.customDomain||a.options.appName+
"."+LoginRadiusDefaults.hubDomain)+"/RequestHandlor.aspx?apikey="+a.options.apiKey+"&provider="+m+"&scope="+f.Scopes}),p.renderCustomInterface(n,"",k,"","",h)):p.loginHandleToken(u,"",e,d)}else a.log("Step Schema not found.")})}};a.customInterface=function(a,b){var c=b.templateName||"";q(function(){p.renderCustomInterface(a,"",c)})};a.clearSession=function(){a.util.removeBrowserStorage(LoginRadiusDefaults.storedTokenName);a.util.removeBrowserStorage(LoginRadiusDefaults.storedUidName);a.util.removeBrowserStorage(LoginRadiusDefaults.storedTwoFAToken)};a.documentCookies={getItem:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(a,b,c,d,g,w){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var e="",f={getInStringFormat:function(a){if(Infinity===a)return"Fri, 31 Dec 9999 23:59:59 GMT";var b=new Date;b.setTime(b.getTime()+1E3*a);return b.toGMTString()}};if(c)switch(c.constructor){case Number:e=Infinity==="; expires="+f.getInStringFormat(c)+c?"":"; max-age="+c;break;case String:e="; expires="+c;break;case Date:e="; expires="+c.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+e+(g?"; domain="+g:"")+(d?"; path="+d:"")+(w?"; secure":"");return!0},removeItem:function(a,b,c){if(!this.hasItem(a))return!1;document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:"");return!0},hasItem:function(a){return a?(new RegExp("(?:^|;\\s*)"+
encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie):!1},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/),b=a.length,c=0;c<b;c++)a[c]=decodeURIComponent(a[c]);return a}};var c=[];a.getAppConfiguration=q}
function LoginRadiusHooksModel(a){function d(d,b){if(a.options.securityQuestionEnabled){var c=p.jsonToQueryString(JSON.parse(d));d="string"===typeof d||d instanceof String?JSON.stringify(p.parseQueryString(d)):JSON.stringify(d);(new LoginRadiusControllers(a)).getSecurityQuestionsController(c,function(e){if(0<e.length)for(var f=0;f<e.length;f++)-1!=c.indexOf(e[f].name)&&e.splice(f,1);if(0<e.length){f=document.createElement("div");var h=[],d=a.LRPrefix.split("##");(new setLoginRadiusCommonFunctions(a)).createFormFields(e,f,b,h,d[0],d[1]);new FormValidator(d[1]+b,h,function(b){a.mergeFormErrors=b});a.$hooks.register("startProcess",function(a,b){for(var c={},f=0;f<e.length;f++)b&&b[e[f].name]&&(c[e[f].name]=b[e[f].name],delete b[e[f].name]);b.securityanswer=c});a.util.addHTMLContent("",f,!0,b,d[0])}})}}function l(d){var b=a.util.elementById(d,!0);b&&(b.style.display="block");window.grecaptcha&&b&&""!=b.innerHTML?grecaptcha.reset(window[d+"lr_recaptcha_widgets_idprefix"]):a.util.renderV2Recaptcha(d,!1)}function q(d,b,c){for(var e=0;e<b.length;e++)b[e].DataSource&&a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/"+b[e].DataSource+"?apiKey="+a.options.apiKey,"",function(a,b){for(var e=0;e<b.length;e++){var f=document.createElement("option");f.setAttribute("value",b[e].Id);f.appendChild(document.createTextNode(b[e].Key));document.getElementById(c+d+"-"+a.name).appendChild(f)}},"registration",b[e])}function m(d,b,c){for(var e=[],f=new setLoginRadiusCommonFunctions(a),h=0;h<b.length;h++)b[h].ParentDataSource||p.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/"+b[h].DataSource+"?apiKey="+a.options.apiKey,"",function(a,b){e[a.DataSource]=b;if(e[a.DataSource])for(var h=0;h<e[a.DataSource].length;h++){var k=document.createElement("option");k.setAttribute("value",e[a.DataSource][h].Id);k.appendChild(document.createTextNode(e[a.DataSource][h].Key));var g=document.getElementById(c+"registration-"+a.name);g&&g.appendChild(k)}if(a&&a.children&&0<a.children.length)for(h=0;h<a.children.length;h++)f.addChangeEventHandler(d,a,a.children[h],c)},"registration",b[h])}var p=a.util;a.$hooks={hooks:[],register:function(d,b,c){"undefined"==typeof a.$hooks.hooks[d]&&(a.$hooks.hooks[d]=[]);parseInt(c,10)===c?a.$hooks.hooks[d].length>c+1?a.$hooks.hooks[d].splice(c,0,b):a.$hooks.hooks[d].push(b):a.$hooks.hooks[d].push(b)},call:function(d){var b=Array.prototype.splice.call(arguments,1);if("undefined"!=typeof a.$hooks.hooks[d])for(var c=0,e=a.$hooks.hooks[d].length;c<e;++c)a.$hooks.hooks[d]&&a.$hooks.hooks[d][c]&&a.$hooks.hooks[d][c].apply(null,b)}};a.$hooks.register("addEventOnElement",function(d){p.extend(a.eventsName,d)});a.$hooks.register("mapErrorMessages",function(d){if(d.code&&d.message)a.errorMessages.push(d);else if(p.isArray(d))for(var b=0;b<d.length;b++)d[b].code&&d[b].message?a.errorMessages.push(d[b]):a.log(notValidMessage);else a.log(notValidMessage)});a.$hooks.register("passwordMeterConfiguration",function(d){p.isArray(d)?p.extend(a.passwordMeterConfiguration,d):a.log(passwordStrengthMessage)});a.$hooks.register("setButtonsName",function(d){for(var b,c=Object.keys(d),e=c.length,f={};e--;)b=c[e],f[b.toLowerCase()]=d[b];p.extend(a.buttonsName,f)});a.$hooks.register("mapValidationMessages",function(d){if(d.rule&&d.message)a.validationMessages.push(d);else if(p.isArray(d))for(var b=0;b<d.length;b++)d[b].rule&&d[b].message?a.validationMessages.push(d[b]):a.log(notValidMessage);else a.log(notValidMessage)});a.$hooks.register("customizeFormLabel",function(d){p.extend(a.formCustomLabel,d)});a.$hooks.register("customizeElementTitle",function(d){p.extend(a.formElementsTitle,d)});a.$hooks.register("defaultChoiceOption",function(d){p.extend(a.defaultOptionField,d)});a.$hooks.register("customizeFormPlaceholder",function(d){p.extend(a.formPlaceholder,d)});a.$hooks.register("formValidationRules",function(d){p.extend(a.formValidations,d)});a.$hooks.register("formAttributes",function(d){p.extend(a.formElementAttributes,d)});a.$hooks.register("buttonAttributes",function(d){p.extend(a.buttonElements,d)});a.$hooks.register("addFormCaptcha",function(d,b,c){a.getAppConfiguration(function(){c&&(a.options[c]=!0);var e=d+"recaptcha_widget";p.addRecaptchaJS();var f=[];p.captchaSchema(e,f,!1,b);var h=document.createElement("div");h.setAttribute("name",f[0].name);if(a.options.invisibleRecaptcha){var u=b.toString();u=/function ([^\(]*)/.exec(u)[1];f[0].html=f[0].html.replace("onCaptchaSubmit",u)}h.innerHTML=f[0].html;p.addHTMLContent(d,h,!0);p.renderV2Recaptcha(e,!1,b)})});a.$hooks.register("addFormCaptchaExecute",function(d){var b=d+"recaptcha_widget";d=p.elementById(b+"_tencent");if(a.options.invisibleRecaptcha)var c=setInterval(function(){if("undefined"!=typeof grecaptcha){try{grecaptcha.execute(window[b])}catch(e){}clearInterval(c)}},1E3);else d&&"none"!=d.style.display&&(a.options.tencentCaptcha||a.options.tencentCaptchaAsFallback&&!window.grecaptcha)&&d.click()});a.$hooks.register("successCallback",function(g,b,c){var e="";a.$hooks.register("setCurrentAction",function(){a.util.setBrowserStorage("LRSetSafariToken",g)});g&&(e="verifyotp"==g.toLowerCase()?"otp":g.toLowerCase());"1132"==b.ErrorCode?(a.options.v2Recaptcha||a.options.invisibleRecaptcha||a.options.tencentCaptcha||a.options.tencentCaptchaAsFallback||(a.options.v2Recaptcha=!0),"verifyemail"==e&&(p.elementById("loginradius-submit-verify").style.display="block"),b=a.LRPrefix.replace("##","")+"recaptcha_widget_"+e,l(b)):"1148"!=b.ErrorCode&&"1165"!=b.ErrorCode||d(c,e)});a.$hooks.register("afterFormRender",function(d,b,c,e){e=a.options.RegistrationFormSchema;var f=[];if("registration"==d){var h={},u;for(u=0;u<e.length;u++)e[u]&&e[u].DataSource&&null!==e[u].DataSource&&(h[e[u].DataSource]=e[u],h[e[u].DataSource].children=[]);for(var n in h)h.hasOwnProperty(n)&&(u=h[n],u.ParentDataSource&&null!=u.ParentDataSource?h[u.ParentDataSource].children.push(u):f.push(u));0<f.length&&m(b,f,c)}"validatecode"==d&&q(d,e,c)});a.$hooks.register("setLocaleBasedInfo",function(d){for(var b in d)if(d.hasOwnProperty(b))switch(b){case "labels":p.extend(a.formCustomLabel,d[b]);break;case "placeholders":p.extend(a.formPlaceholder,d[b]);break;case "validationMessages":a.$hooks.call("mapValidationMessages",d[b]);break;case "errorMessages":a.$hooks.call("mapErrorMessages",d[b]);break;case "passwordMeterConfiguration":a.$hooks.call("passwordMeterConfiguration",d[b]);break;case "buttonsName":a.$hooks.call("setButtonsName",d[b])}})}
function setLoginRadiusCommonFunctions(a){function d(b,c){var e={0:"worst",1:"bad",2:"weak",3:"good",4:"strong",5:"secure"},d={0:"#dd514c",1:"orange",2:"yellow",3:"#5eb95e",4:"blue",5:"violet"},h={0:"Worst",1:"Bad",2:"Weak",3:"Good",4:"Strong",5:"Secure"},u=[],n=a.passwordMeterConfiguration,w;for(w in e)n[w]&&n[w]["case"]?n[w]["case"].toLowerCase()==e[w]&&u.push({color:n[w].color?n[w].color:d[w],Message:n[w].message?n[w].message:h[w]}):u.push({color:d[w],Message:h[w]});return u}function l(b,c,e,d){d=a.util.elementById(e+"_tencent");var f=a.util.elementById(e);window.grecaptcha&&a.options.invisibleRecaptcha&&f&&""!=f.innerHTML&&"none"!=f.style.display?grecaptcha.execute(window[e+"lr_recaptcha_widgets_idprefix"]):d&&"none"!=d.style.display&&(a.options.tencentCaptcha||a.options.tencentCaptchaAsFallback&&!window.grecaptcha)?window.onTencentCaptchaSubmitCallback=function(e){var d=a.util.serialize(b);d+="&qq_captcha_ticket="+e.ticket;d+="&qq_captcha_randstr="+e.randstr;c(d)}:c(a.util.serialize(b))}
function q(b,c,e,d,h){var f="linksignin";"passwordlessLoginOTPButtonLabel"===b&&(f="otpsignin");var n=document.createElement("input");n.type="submit";var w=a.buttonsName[b.toLowerCase()]||g[b.toLowerCase()],k=g[b.toLowerCase()];n.value=w;n.id=d+f+"-"+k.toLowerCase().replace(/ /g,"-");n.setAttribute("class",h+f+" "+f+"-"+d+k.toLowerCase().replace(/ /g,"-"));c.appendChild(n);a.util.addEvent("click",e,function(a){window.lrpasswordlessloginotp=!1;window.lrpasswordlesslogin=!1});"passwordlessLoginOTPButtonLabel"===b?a.util.addEvent("click",n,function(a){window.lrpasswordlessloginotp=!0}):a.util.addEvent("click",n,function(a){window.lrpasswordlesslogin=!0})}var m=this,p=LoginRadiusDefaults.messages,g=LoginRadiusDefaults.buttonNames;m.renderCustomInterface=function(b,c,e,d,h,u){a.options.selector=b;var f=[];b=function(b){if(a.options.providerCountry&&!a.options.providersList)for(var k=a.options.providerCountry,n=[{Name:"Facebook",country:"global",except:"china"},{Name:"Google",country:"global",except:"china"},{Name:"Yahoo",country:"global",except:"china"},{Name:"Live",country:"global",except:"china"},{Name:"Twitter",country:"global",except:"china"},{Name:"Linkedin",country:"global",except:"china"},{Name:"Myspace",country:"US"},{Name:"Foursquare",country:"global",except:"china"},{Name:"Vkontakte",country:"Russia"},{Name:"Renren",country:"China"},{Name:"QQ",country:"China"},{Name:"Kaixin",country:"China"},{Name:"Github",country:"global",except:"china"},{Name:"Mailru",country:"Russia"},{Name:"Amazon",country:"US"},{Name:"Paypal",country:"global"},{Name:"Salesforce",country:"global"},{Name:"ODNOKLASSNIKI",country:"Russia"},{Name:"WORDPRESS",country:"global"},{Name:"GOOGLEPLUS",country:"global",except:"china"},{Name:"Disqus",country:"global",except:"china"},{Name:"INSTAGRAM",country:"global",except:"china"},{Name:"SINAWEIBO",country:"China"},{Name:"XING",country:"Germany"},{Name:"PINTEREST",country:"global",except:"china"},{Name:"LINE",country:"global"},{Name:"AOL",country:"US"}],u=0;u<n.length;u++)for(var g=0;g<b.length;g++)!b[g]||b[g].Name.toLowerCase()!==n[u].Name.toLowerCase()||n[u].country.toLowerCase()===k.toLowerCase()||"global"===n[u].country.toLowerCase()&&!n[u].except||n[u].except&&n[u].except.toLowerCase()!==k.toLowerCase()||b.splice(g,1);a.$hooks.call("socialInterfaceProviders",b);if(a.options.providersList)var w=a.options.providersList;k=a.options.hashTemplate?a.util.hashTmpl:a.util.tmpl;n=e.split(",");u=a.util.getQueryParameterByName("scope");""==a.options.scope&&u&&(a.options.scope=u);u="&callback="+a.options.callbackUrl+"&same_window="+a.options.callbackInsideSameWindow+"&is_access_token="+a.options.accessTokenResponse+"&callbacktype="+a.options.callbackType+"&disablesignup="+a.options.disableSignup;-1==u.indexOf("scope")&&(u+="&scope="+a.options.scope);a.options.isMobile&&(u+="&ismobile=true");h&&(u+="&ac_linking=true");a.options.isCustomScope&&(u+="&is_custom_scope=true");g=a.util.getThisObjectName();for(var m=0;m<n.length;m++){var p=a.util.elementById(n[m]);p&&-1!=p.innerHTML.indexOf("ac_linking")&&(u=u.replace("&ac_linking=true",""));p=[];f[m]="";for(var l=0;l<b.length;l++){b[l].ObjectName=g;-1==b[l].Endpoint.indexOf("callback=")&&(b[l].Endpoint+=u);var q;var I=q=!1;c&&c[b[l].Name.toLowerCase()]&&(q=!0,I=c[b[l].Name.toLowerCase()]);b[l].isLinked=q;b[l].providerId=I;(a.options.unLinkAccountCallbackUrl||window.location.href).indexOf("?");p.push(b[l])}l=[];for(q=0;q<p.length;q++)p[q].isLinked&&l.push(p[q]);if(0<l.length){for(q=0;q<p.length;q++)p[q].isLinked||l.push(p[q]);p=l}for(l=0;l<p.length;l++)if(""!=n[m])if(void 0!==w){if(-1!=w.indexOf(p[l].Name)||-1!=w.indexOf(p[l].Name.toLowerCase()))f[m]+=k(n[m],p[l])}else f[m]+=k(n[m],p[l])}w=a.options.selector.split(",");for(b=0;b<w.length;b++)if(k=w[b],0==k.indexOf(".")){if(k=k.replace(".",""),(k=a.util.elementsByClass(k))&&0<k.length)for(n=0;n<k.length;n++)k[n].innerHTML=d?k[n].innerHTML+f[b]:f[b]}else""!=k&&(k=a.util.elementById(k))&&(k.innerHTML=d?k.innerHTML+f[b]:f[b])};u?b(u):void 0!=a.options.SocialSchema&&b(a.options.SocialSchema.Providers)};m.mapRegistrationSchema=function(b,c,e){c=a.util.parseQueryString(c);e={};var d={},h={},u=[],n;for(n in c)if(-1!==n.indexOf("cf_")){var g=n.replace("cf_","");e[g]=c[n];delete c[n]}else if("emailsubscription"==n)c.IsEmailSubscribed="on"==c[n]||"true"==c[n]?!0:!1,delete c[n];else if("emailid"==n||"email"==n)d.value=c[n],d.type="Primary";else if("SecurityQuestionAnswer"!==n&&-1!==n.indexOf("securityQuestion")){g={};for(var k=0;k<a.options.securityQuestionsCount;k++)c["securityAnswer"+k]&&c["securityQuestion"+k]&&(g[c["securityQuestion"+
k]]=c["securityAnswer"+k]),delete c["securityQuestion"+k],delete c["securityAnswer"+k];0!=Object.keys(g).length&&(c.SecurityQuestionAnswer=g)}else if("country"==n)h=-1!==c[n].indexOf("|")?{code:c[n].split("|")[0],name:c[n].split("|")[1]}:{code:"",name:c[n]};else if((g=a.util.findInSchema(b,"name",n))&&g.Parent){k=-1!=n.indexOf("_")?n.split("_")[1]:n;if("undefined"==typeof c[g.Parent]){c[g.Parent]=[];var t={};t[k]=c[n];"Addresses"==g.Parent?t.type="personal":"PhoneNumbers"!=g.Parent||t.phonetype||(t.phonetype="default");c[g.Parent].push(t)}else"Addresses"!=g.Parent||c[g.Parent][0].type||(c[g.Parent][0].type="personal"),c[g.Parent][0][k]=c[n];delete c[n]}0!==Object.keys(e).length&&(c.CustomFields=e);0!==Object.keys(d).length&&(u.push(d),c.email=u);0!==Object.keys(h).length&&(c.country=h);return c};m.showQRCode=function(b,c,d,f,h,u,n){var e=a.QRCodeSchema.slice();e[0].type=a.options.maskSensitiveInput?"password":"string";var k=function(a,b){a&&e.splice(0,0,{type:"image",name:"qrcode",display:"QR Code",rules:"",permission:"r",value:a});if(b){var c=h||LoginRadiusDefaults.classPrefix;e.splice(1,0,{type:"button",name:"ManualEntryCode",display:"Get Manual Entry Code",rules:"",permission:"r",title:"Use this code when you unable to scan QR code. Tap 'Enter a provided key' then enter the email address of your Account and enter this key in your authenticator app",event:"click",eventCallback:function(a){document.getElementsByClassName("content-"+c+"ManualEntryCode")[0].innerHTML=b}})}},g=!0,l=new LoginRadiusControllers(a,m);if(b.SecondFactorAuthentication){var p=b.SecondFactorAuthentication.QRCode;var q=b.SecondFactorAuthentication.ManualEntryCode;b.SecondFactorAuthentication.IsGoogleAuthenticatorVerified||k(p,q)}else if(g=!1,p=b.QRCode,q=b.ManualEntryCode,!b.IsGoogleAuthenticatorVerified)g=!0,k(p,q);else if("false"!=a.util.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth)&&a.options.twoFactorAuthentication||a.options.optionalTwoFactorAuthentication)b=a.util.getButtonAttribute("disablegoogleauthenticator",h),a.util.addHTMLContent(c,b),a.util.addEvent("click",b,function(a){l.resetTwoFactorAuthenticationController("googleauthenticator",d,f)});g&&m.createForm(e,"showQRcode",c,function(a){l.verify2FAOTPController(a,d,f,u,n)},function(a){f(a)},h)};m.resetPassword=function(b,c,d,f,h){var e=a.resetPasswordFormSchema,n=new LoginRadiusControllers(a,m);if(null==a.util.getHashParam("vtype"))if(h)e=a.resetPasswordByPhoneSchema,e.push({type:"hidden",name:"email",value:h.email});else{if(a.options.phoneLogin){var g="&"+LoginRadiusDefaults.LRPhoneNo;e=a.resetPasswordByPhoneSchema;a.util.findInSchema(e,"name","resendotp")||e.push({type:"button",name:"resendotp",display:"Resend OTP",rules:"",permission:"r",event:"click",eventCallback:function(a){n.forgotPasswordbyPhoneController(LoginRadiusDefaults.LRPhoneNo,b,c,d,f,function(){})}})}}else{var k=a.util.getHashParam("vtoken");if(k)if(a.options.verifyEmailByOTP){var t=a.util.getQueryParameterByName("email"),l="&otp="+k;l+="&email="+encodeURIComponent(t.replace(/ /g,"+"));a.resetPasswordFormSchema.splice(2,1)}else a.resetPasswordFormSchema[2].value=k,m.setPasswordRule(a.resetPasswordFormSchema[0]),m.setPasswordRule(a.resetPasswordFormSchema[1]);else d([{Message:"Verification Token not found in query string."}])}m.createForm(e,"resetpassword",b,function(a){-1==a.indexOf("otp")||h?(l&&(a+=l),n.resetPasswordController(a,c,d,b,f)):n.resetPasswordByPhoneController(a+g,c,d,b,f)},function(a){d(a)},f)};m.setPasswordRule=function(b,c){a.options.passwordLength=a.options.passwordlength||a.options.passwordLength;b&&a.options.passwordLength&&a.options.passwordLength.min&&a.options.passwordLength.max&&(b.rules=b.rules||"",b.rules=b.rules.replace("min_length[6]","min_length["+a.options.passwordLength.min+"]").replace("max_length[32]","max_length["+a.options.passwordLength.max+"]"));c&&b&&(b.rules="required")};m.changeNumberForm=function(b,c,d,f,h,u,n,g){var e=a.util.getButtonAttribute("changenumber",h),t=a.util.getButtonAttribute("disableotpauthenticator",h),w=a.util.getBrowserStorage(LoginRadiusDefaults.storedGAAuth),l=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);c?(c.appendChild(e),l&&!a.LRCheckLogin&&"false"!=w&&c.appendChild(t)):(a.util.addHTMLContent(b,e,u),l&&!a.LRCheckLogin&&"false"!=w&&a.util.addHTMLContent(b,t,!0));a.util.addEvent("click",t,function(a){resetTwoFactorAuthenticationController("otpauthenticator",d,f)});a.util.addEvent("click",e,function(a){document.getElementsByName(h+"changePhone")[0]||m.updatePhoneNumber(b,d,f,h,"changePhone",n,g)})};m.validateAndCall=function(b){LoginRadiusDefaults.isSSOInitFired?a.options.appName?b():a.log("LoginRadius site name (app name) required to do SSO"):a.log("Init method should be called first then login.")};m.logout=function(b){m.validateAndCall(function(){a.util.jsonpCall("https://"+(a.options.customDomain||a.options.appName+"."+LoginRadiusDefaults.hubDomain)+"/ssologin/"+(a.options.tokenExpire?"tokenExpire":"logout")+(a.options.tokenExpire?"?tokenExpire=1":""),function(c){a.documentCookies.removeItem(LoginRadiusDefaults.tokenCookie,a.options.appPath);a.clearSession();b&&b()},"logout")})};m.otpEmailVerification=function(b,c,d,f,h){m.createForm(a.otpSchema,"otp",b,function(e){e=a.util.parseQueryString(e);e=a.util.mergeOptions(h,e);(new LoginRadiusControllers(a,m)).emailVerificationController(e,c,d,b,f,!0)},function(a){d(a)},f)};m.loginHandleToken=function(b,c,d,f,h){LoginRadiusDefaults.lrResponseCounter=0;LoginRadiusDefaults.lrCounterJwtResponse="";LoginRadiusDefaults.lrCounterTokenResponse="";if(b)if(b.ErrorCode)f(m.loginRadiusErrorTojsError(g));else{var e=function(){a.LoginRadiusHostedPage&&a.documentCookies.setItem("lr-session-token",b.access_token);LoginRadiusDefaults.lrResponseCounter++;LoginRadiusDefaults.lrCounterTokenResponse=b;a.options.tokenType&&"jwt"==a.options.tokenType.toLowerCase()?2==LoginRadiusDefaults.lrResponseCounter&&(b.jwttoken=LoginRadiusDefaults.lrCounterResponse.signature,null!=c&&""!=c?d(b,a.util.parseQueryString(c)):d(b)):null!=c&&""!=c?d(b,a.util.parseQueryString(c)):d(b)},n=a.util.getBrowserStorage("LRSetSafariToken");a.util.removeBrowserStorage("LRSetSafariToken");if(a.setHostedToken||n)d(b);else{n=(n=a.util.findInSchema(a.registrationFormSchema&&0<a.registrationFormSchema.length?a.registrationFormSchema:a.options.RegistrationFormSchema,"name","phoneid"))&&-1!=n.rules.indexOf("required")&&a.options.phoneLogin;var g=b.Profile||b.Data,k=!(a.options.disabledEmailVerification||a.options.optionalEmailVerification);if(g&&!g.EmailVerified&&k)f([m.setMappedMessage(p.emailNotVerified)]);else if(n&&g&&!g.PhoneIdVerified){n={phone:g.PhoneId};var t=a.currentLRContainer;(new LoginRadiusControllers(a,m)).resendOTPController(n,function(){m.verifyOTP("phone="+g.PhoneId,t,d,f,h);m.resendOTP("phone="+g.PhoneId+"&noPhoneVerified=false",t,d,f,h)},f,h+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp",t,h)}else{g&&g.Uid&&a.util.setBrowserStorage(LoginRadiusDefaults.storedUidName,g.Uid);a.util.setBrowserStorage(LoginRadiusDefaults.storedTokenName,b.access_token);if(LoginRadiusDefaults.isSSOInitFired){m.setToken(b.access_token);n=navigator.userAgent.toLowerCase();var l=!!(-1==n.indexOf("crios")&&-1==n.indexOf("chrome")&&0<=n.indexOf("safari")),q=/ipad|iphone|ipod/.test(n)&&!window.MSStream,F=0<=n.indexOf("ucbrowser"),A=/crios/i.test(n);n=a.options.customDomain||a.options.appName+"."+LoginRadiusDefaults.hubDomain;var z=a.util.getQueryParameterByName("vtype"),E=a.util.getQueryParameterByName("vtoken");k=window.location.href;z&&(k=k.replace("?vtype="+z,"").replace("&vtype="+z,""));E&&(k=k.replace("&vtoken="+E,"").replace("?vtoken="+E,""));k=encodeURIComponent(k);l||q&&F||q&&A?(a.options.askRequiredFieldForTraditionalLogin||a.util.setBrowserStorage("LRTraditionalLogin",!0),a.$hooks.call("setCurrentAction"),l=a.options.safariHttpsEnable?"https":"http",a.options.stayLogin?(q=a.util.getBrowserStorage("lr-rememberme"),a.util.removeBrowserStorage("lr-rememberme"),window.location=l+"://"+n+"/ssologin/setCustomSafariToken?token="+b.access_token+"&apiKey="+a.options.apiKey+"&isrememberMe="+q+"&callback="+k):window.location=l+"://"+n+"/ssologin/setSafariToken?token="+
b.access_token+"&apiKey="+a.options.apiKey+"&callback="+k):(k="",l="setToken",a.options.stayLogin&&(k="&isrememberMe="+a.util.getBrowserStorage("lr-rememberme"),a.util.removeBrowserStorage("lr-rememberme"),l="setCustomToken"),a.util.jsonpCall("https://"+n+"/ssologin/"+l+"?token="+b.access_token+"&apiKey="+a.options.apiKey+k,function(){e()},"","setToken"))}else e();a.options.tokenType&&"jwt"==a.options.tokenType.toLowerCase()&&m.getJwtToken(b.access_token,d,f)}}}};m.getJwtToken=function(b,c,d){a.util.ajaxCall("get",LoginRadiusDefaults.cloudApiDomain+"/sso/jwt/api/token?apikey="+a.options.apiKey+"&jwtapp="+a.options.integrationName+"&access_token="+b,"",function(a){LoginRadiusDefaults.lrResponseCounter++;LoginRadiusDefaults.lrCounterJwtResponse=a;2==LoginRadiusDefaults.lrResponseCounter&&(a.ErrorCode?d(a):(LoginRadiusDefaults.lrCounterTokenResponse.jwttoken=a.signature,c(LoginRadiusDefaults.lrCounterTokenResponse)))},"JWTToken")};m.mapSchema=function(b,c,d){c=a.util.keysToLowerCase(c);var e=[];Object.keys(b).forEach(function(a){e.push(b[a])});for(var h=0;h<b.length;h++)if(null!=b[h])if("emailid"===b[h].name.toLowerCase()&&c.email&&c.email[0]&&c.email[0].value&&""!=c.email[0].value)if(c.emailverified||(a.options.disabledEmailVerification||a.options.optionalEmailVerification)&&!a.options.askEmailForUnverifiedProfileAlways)e[h].value=c.email[0].value,b[h]=null;else{if(!a.options.askEmailForUnverifiedProfileAlways||a.setHostedToken)e[h]=b[h]=null}else if("country"===b[h].name.toLowerCase()&&c.country&&null!=c.country.name&&""!=c.country.name&&"unknown"!=c.country.name.toLowerCase())e[h].value=c.country.name,c.country.code&&(e[h].value=c.country.code+"|"+e[h].value),b[h]=null;else if("emailsubscription"===b[h].name.toLowerCase()&&c.isemailsubscribed&&""!=c.isemailsubscribed)e[h].value=c.isemailsubscribed,b[h]=null;else if("phoneid"===b[h].name.toLowerCase()&&c.phoneid&&""!=c.phoneid)e[h].value=c.phoneid.replace("+",""),b[h]=null;else if("birthdate"===b[h].name.toLowerCase()&&c.birthdate&&""!=c.birthdate){var g=c.birthdate.replace("-","/").replace("-","/").split("/");g[2]&&""!=g[2]&&(e[h].value=c.birthdate,b[h]=null)}else if("password"===b[h].name.toLowerCase()||"confirmpassword"===b[h].name.toLowerCase())null==c.password&&(a.options.promptPasswordOnSocialLogin||c.firstlogin&&a.options.promptPasswordOnFirstLoginForSocial)||(e[h]=b[h]=null);else if(""!=b[h].Parent&&void 0!==b[h].Parent&&null!==b[h].Parent){if(b[h].Parent&&c[b[h].Parent.toLowerCase()]&&void 0!==c[b[h].Parent.toLowerCase()]){g=-1!=b[h].name.indexOf("_")?b[h].name.split("_")[1]:b[h].name;var n=Object.keys(c[b[h].Parent.toLowerCase()]).length-1;"object"==typeof c[b[h].Parent.toLowerCase()]&&c[b[h].Parent.toLowerCase()][n]&&c[b[h].Parent.toLowerCase()][n][g.toLowerCase()]?null!=c[b[h].Parent.toLowerCase()][n][g.toLowerCase()]&&void 0!==c[b[h].Parent.toLowerCase()][n][g.toLowerCase()]&&"unknown"!==c[b[h].Parent.toLowerCase()][n][g.toLowerCase()]&&(e[h].value=c[b[h].Parent.toLowerCase()][n][g.toLowerCase()],b[h]=null):(e[h].value=c[b[h].Parent.toLowerCase()][b[h].name.toLowerCase()],b[h]=null)}}else 0===b[h].name.indexOf("cf_")&&c.customfields&&c.customfields[b[h].name.replace("cf_","").toLowerCase()]?(e[h].value=c.customfields[b[h].name.replace("cf_","").toLowerCase()],b[h]=null):b[h].name&&"object"!=typeof c[b[h].name.toLowerCase()]&&null!=c[b[h].name.toLowerCase()]&&""!=c[b[h].name.toLowerCase()]&&void 0!==c[b[h].name.toLowerCase()]&&"unknown"!==c[b[h].name.toLowerCase()]&&(e[h].value=c[b[h].name.toLowerCase()],b[h]=null);b=b.filter(function(a){return a});if(d&&"profileeditor"==d&&!c.ErrorCode)return e=e.filter(function(a){return a});for(h=0;h<b.length;h++)if(null!=b[h].rules&&""!=b[h].rules&&-1<b[h].rules.indexOf("required")||a.options.askOptionalFieldsOnRegistration&&!0===c.firstlogin)return d&&!c.ErrorCode?e=e.filter(function(a){return a}):b;return[]};m.loginRadiusErrorTojsError=function(a){var b=[];b.push(m.setMappedMessage(a));return b};m.setMappedMessage=function(b){for(var c=0;c<a.errorMessages.length;c++)a.errorMessages[c].code==b.ErrorCode&&(b.Message=a.errorMessages[c].message||b.Message,b.Description=a.errorMessages[c].description||b.Description);return b};m.setCustomLabel=function(b){for(var c=0;c<b.length;c++)b[c]&&a.formCustomLabel[b[c].name]&&(b[c].display=a.formCustomLabel[b[c].name])};m.setCustomTitle=function(b){for(var c=0;c<b.length;c++)b[c]&&a.formElementsTitle[b[c].name]&&(b[c].title=a.formElementsTitle[b[c].name])};m.setPlaceholder=function(b){for(var c=0;c<b.length;c++)b[c]&&a.formPlaceholder[b[c].name]&&(b[c].placeholder=a.formPlaceholder[b[c].name])};m.setValidation=function(b){a.formValidations[b.name]&&(b.rules=a.formValidations[b.name])};m.setAttribute=function(b,c){if(a.formElementAttributes[b.name])for(var d=a.formElementAttributes[b.name].split("&"),f=0;f<d.length;f++){var h=d[f].split("=");c.setAttribute(h[0],h[1])}};m.verifyOTP=function(b,c,d,f,h,g,n){var e=!1,k="otp";a.LRCheck2FA&&(a.options.twoFactorAuthentication||a.options.optionalTwoFactorAuthentication)&&!a.LRCheckRegistration&&(e=!0,k="twofaotp");m.createForm(a.otpSchema,k,c,function(c){var h=new LoginRadiusControllers(a,m);if(e)h.verify2FAOTPController(c,d,f,g,n);else{if("string"===typeof b||b instanceof String)b=a.util.parseQueryString(b);c=a.util.parseQueryString(c);if(b.phone)var k={phone:b.phone};else if(b.phoneid||b.phoneId)k={phone:b.phoneid||b.phoneId};b.onetouchloginflag&&(c.onetouchloginflag=!0);b.haveToken&&(c.haveToken=!0);h.verifyOTPController(c,k,d,f,g,n)}},function(a){f(a)},h)};m.resendOTP=function(b,c,d,f,h,g,n){var e={},k=!0;if("string"===typeof b||b instanceof String)b=a.util.parseQueryString(b);b.noPhoneVerified&&(k=!1);var u=!0;b.phoneid||b.phoneId?(u=!1,e={phone:b.phoneid||b.phoneId}):b.phone?(a.socialLoginFlag||(u=!1),e=b):b.phoneNo2FA||b.phoneno2fa?e={phoneno2fa:b.phoneNo2FA||b.phoneno2fa}:b.SecondFactorAuthentication&&b.SecondFactorAuthentication.OTPPhoneNo&&(e={phoneno2fa:b.SecondFactorAuthentication.OTPPhoneNo});var l=a.util.getButtonAttribute("resendotp",h),p=h||LoginRadiusDefaults.classPrefix;h=u?"twofaotp":"otp";var q=document.getElementsByName(p+h)[0];q||(q=document.getElementsByName(p+("twofaotp"==h?"otp":"twofaotp"))[0]);q&&q.appendChild(l);!a.LRCheckLogin||!u||k&&"false"!=a.util.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth)||m.changeNumberForm(c,q,d,f,p,"",g,n);b.onetouchloginflag&&(e.onetouchloginflag=!0);b.updatePhone&&(e.updatePhone=!0);a.util.addEvent("click",l,function(a){m.resendOTPManually(e,c,d,f,p,g,n)})};m.sendSignInEmail=function(b,c,d,f,h){b=a.util.checkPhoneOrEmailLogin(b);var e="email";-1!=b.indexOf("phoneApi=1")&&(e="otp");a.util.jsonpCall(LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/"+e+"?apiKey="+a.options.apiKey+"&verificationUrl="+a.options.verificationUrl+"&passwordlesslogintemplate="+(a.options.instantLinkLoginEmailTemplate||a.options.passwordlessLoginEmailTemplate)+"&"+b,function(e){if(e.ErrorCode)d(m.loginRadiusErrorTojsError(e));else if(c(e),e.Data&&e.Data.AccountSid){var n=new LoginRadiusControllers(a,m);a.$hooks.register("beforeFormRender",function(e,n){a.util.findInSchema(n,"name","resendotp")||n.push({type:"button",name:"resendotp",display:"Resend OTP",rules:"",permission:"r",event:"click",eventCallback:function(a){m.sendSignInEmail(b,c,d,f,h)}})});m.createForm(a.otpSchema,"otp",f,function(e){var k=h+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp";n.verifyInstantOTP(e,a.util.parseQueryString(b),c,d,k,f,h)},function(a){d(m.setMappedMessage(a))},h)}},"passwordlessLogin")};m.resendOTPManually=function(b,c,d,f,h,g,n){var e=h+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp",k=new LoginRadiusControllers(a,m);a.LRCheck2FA&&(a.options.twoFactorAuthentication||a.options.optionalTwoFactorAuthentication)&&!a.LRCheckRegistration?"false"==a.util.getBrowserStorage(LoginRadiusDefaults.storedOTPAuth)?k.update2FAPhoneNumberController(b,c,d,f,h,g,n):k.resendOTP2FAController(b,d,f,e,c,h):k.resendOTPController(b,d,f,e,c,h)};m.updatePhoneNumber=function(b,c,d,f,h,g,n){a.LRCheck2FA&&(a.options.twoFactorAuthentication||a.options.optionalTwoFactorAuthentication)&&(a.checkPhoneNumberSchema[0].name="phoneNo2FA");f=f||LoginRadiusDefaults.classPrefix;document.getElementsByName(f+"showQRcode")[0]&&(LoginRadiusDefaults.innerHTML=!0);m.createForm(a.checkPhoneNumberSchema,h||"updatePhone",b,function(e){var h=new LoginRadiusControllers(a,m);-1==e.indexOf("phone=")&&(a.options.twoFactorAuthentication||a.options.optionalTwoFactorAuthentication)?h.update2FAPhoneNumberController(e,b,c,d,f,g,n):h.updatePhoneNumberController(e,b,c,d,f,g,n)},function(a){d(a)},f)};m.pingForSmartLogin=function(b,c,d){var e=a.options.autoLoginPingInterval||a.options.smartLoginPingInterval,h=a.options.autoLoginPingCount||a.options.smartLoginPingCount;a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/smartlogin/ping?apiKey="+a.options.apiKey+"&clientGuid="+b,"",function(a){1139==a.ErrorCode||1140==a.ErrorCode?setTimeout(function(){LoginRadiusDefaults.pingCount<h&&(m.pingForSmartLogin(b,c,d),LoginRadiusDefaults.pingCount++)},1E3*e):a.ErrorCode&&1139!==a.ErrorCode?(d(a),LoginRadiusDefaults.pingCount=0):(LoginRadiusDefaults.pingCount=0,c(a))},"pingSmartLogin")};m.addChangeEventHandler=function(b,c,d,f){a.util.addEvent("change",document.getElementById(f+"registration-"+c.name),function(c){a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/"+d.DataSource+"?apiKey="+a.options.apiKey+"&parentId="+this.value,"",function(a,c){var d=document.getElementById(f+"registration-"+a.name);if(c.ErrorCode)for(h=1;h<d.options.length;h++)d.options[h]=null;else for(var e=0;e<c.length;e++)if(0==e&&1<d.options.length){for(var h=1;h<d.options.length;h++)d.options[h]=null;h=document.createElement("option");h.setAttribute("value",c[e].Id);h.appendChild(document.createTextNode(c[e].Key));d.appendChild(h)}else h=document.createElement("option"),h.setAttribute("value",c[e].Id),h.appendChild(document.createTextNode(c[e].Key)),d.appendChild(h);for(d=0;d<a.children.length;d++)m.addChangeEventHandler(b,a,a.children[d],f)},"registration",d)})};m.createFormFields=function(b,c,e,f,h,g,n){n=n||function(){};for(var u=function(b){b=Math.random();var c=this.value,d=a.util.elementById(e+"-password-strength-meter"),f=a.util.elementById(e+"-password-strength-text");f.innerHTML="";var h=0;0<c.length&&(h++,c.match(/[a-z]/)&&c.match(/[A-Z]/)&&h++,c.match(/\d+/)&&h++,c.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)&&h++,12<c.length&&h++);d.value=h;d=a.util.elementById(b)?a.util.elementById(b):document.createElement("style");d.type="text/css";d.id=b;d.innerHTML="#"+e+"-password-strength-meter::-webkit-meter-optimum-value { background: "+E[h].color+" !important; }";document.body.appendChild(d);""!==c&&0<h?(f.innerHTML="Strength: "+E[h].Message,f.style.color=""):""!==c&&(f.innerHTML=E[h].Message,f.style.color=E[h].color)},k=0;k<b.length;k++)if(b[k]){m.setValidation(b[k]);f[k]={};f[k].name=b[k].name;f[k].display=b[k].display;f[k].rules=b[k].rules;switch(b[k].type){case "text":var t=document.createElement("textarea");break;case "html":case "captcha":t=document.createElement("div");break;case "password":t=document.createElement("input");t.type="password";break;case "hidden":t=document.createElement("input");t.type="hidden";t.value=b[k].value||"";break;case "option":t=document.createElement("select");var l=document.createElement("option");l.appendChild(document.createTextNode("-- select --"));l.setAttribute("value","");t.appendChild(l);if(void 0==b[k].DataSource&&null!=b[k].options){for(l=0;l<b[k].options.length;l++){var p=document.createElement("option");p.setAttribute("value",b[k].options[l].value);"country"===b[k].name&&p.setAttribute("value",b[k].options[l].value+
"|"+b[k].options[l].text);p.appendChild(document.createTextNode(b[k].options[l].text));t.appendChild(p)}a.defaultOptionField[b[k].name]&&(t.value=a.defaultOptionField[b[k].name])}break;case "multi":t=document.createElement("input");t.type="checkbox";break;case "email":t=document.createElement("input");t.type="email";break;case "button":t=document.createElement("input");t.type="button";t.value=b[k].display;break;case "image":t=document.createElement("img");t.src=b[k].value;t.type="image";break;default:t=document.createElement("input"),t.type="text"}b[k].title&&(t.title=b[k].title);b[k].disabled&&(t.disabled=b[k].disabled);m.setAttribute(b[k],t);b[k].placeholder&&(t.placeholder=b[k].placeholder);b[k].value&&("multi"===b[k].type?t.checked=!0:t.value=b[k].value);if("html"===b[k].type)t=document.createElement("div"),t.setAttribute("class",h+"-form-element-content content-"+g+b[k].name),t.innerHTML=b[k].html,b[k].event&&a.util.addEvent(b[k].event,t,b[k].eventCallback),c.appendChild(t);else if("captcha"===b[k].type)t=document.createElement("div"),t.setAttribute("class",h+"-form-element-content content-"+g+b[k].name),t.innerHTML=b[k].html,a.options.formValidationMessage&&(l=document.createElement("div"),l.setAttribute("id","validation-"+g+e+"-"+b[k].name),l.setAttribute("class",h+"validation-message validation-"+g+b[k].name),t.appendChild(l)),c.appendChild(t);else{t.setAttribute("name",b[k].name);b[k].name&&("phoneid"===b[k].name.toLowerCase()||"phone"===b[k].name.toLowerCase())&&a.options.existPhoneNumber&&"registration"==e&&a.util.addEvent("blur",t,function(b){""!=this.value.trim()&&(new LoginRadiusControllers(a,m)).checkPhoneNumberAvailabilityController("phone="+this.value,function(a){if(a.IsExist)for(a=0;a<c.childNodes.length;a++)-1!==c.childNodes[a].getAttribute("class").indexOf("phoneid")&&(c.childNodes[a].childNodes[2].innerHTML="phone already exists, enter unique phone number");else for(a=0;a<c.childNodes.length;a++)-1!==c.childNodes[a].getAttribute("class").indexOf("phoneid")&&(c.childNodes[a].childNodes[2].innerHTML="")},n)});"emailid"===b[k].name&&a.util.addEvent("keyup",t,function(a){32==a.keyCode&&(this.value=this.value.trim())});t.setAttribute("id",g+e+"-"+b[k].name);b[k].event&&a.util.addEvent(b[k].event,t,b[k].eventCallback);if(a.eventsName[t.id])if(l=a.eventsName[t.id],a.util.isArray(l))for(p=0;p<l.length;p++)l[p].event&&l[p].eventCallback&&a.util.addEvent(l[p].event,t,l[p].eventCallback);else a.util.addEvent(l.event,t,l.eventCallback);if("hidden"===b[k].type)c.appendChild(t);else if("button"===b[k].type)l=document.createElement("div"),l.setAttribute("class",h+"-form-element-content content-"+g+b[k].name),l.appendChild(t),c.appendChild(l);else{p=document.createElement("label");p.setAttribute("for",g+e+"-"+b[k].name);p.innerHTML=b[k].display;t.setAttribute("class",h+b[k].type+" "+g+b[k].name);b[k].rules&&-1!==b[k].rules.indexOf("required")&&(t.className+=" lr-required");l=document.createElement("div");l.setAttribute("class",h+"-form-element-content content-"+g+b[k].name);"multi"===b[k].type?(l.appendChild(t),l.appendChild(p)):(l.appendChild(p),l.appendChild(t));if(b[k].style&&0<b[k].style.length)for(p=0;p<b[k].style.length;p++)l.style[b[k].style[p].key]=b[k].style[p].value;a.options.formValidationMessage&&(p=document.createElement("div"),p.setAttribute("id","validation-"+g+e+"-"+b[k].name),p.setAttribute("class",h+"validation-message validation-"+g+b[k].name),l.appendChild(p));if(a.options.displayPasswordStrength&&("password"===t.name||"newpassword"===t.name)&&("registration"==e||"resetpassword"===e||"setpassword"===e||"changepassword"==e||"socialRegistration"===e||"loginRequiredFieldsUpdate"==e)){p=a.options.passwordLength&&a.options.passwordLength.min||6;var q=a.options.passwordLength&&a.options.passwordLength.max||32;if(b[k].rules)for(var A=b[k].rules.split("|"),z=0;z<A.length;z++)-1<A[z].indexOf("min_length")?p=A[z].substring(11,A[z].length-1):-1<A[z].indexOf("max_length")&&(q=A[z].substring(11,A[z].length-1));A=document.createElement("meter");A.setAttribute("max","4");A.setAttribute("id",e+"-password-strength-meter");z=document.createElement("div");z.setAttribute("id",e+"-password-strength-text");t.parentNode.appendChild(A);t.parentNode.appendChild(z);var E=d(p,q);a.util.addEvent("keyup",t,u)}c.appendChild(l)}}}};m.setToken=function(b){a.documentCookies.setItem(LoginRadiusDefaults.tokenCookie,b,"",a.options.appPath)};m.createForm=function(b,c,d,f,h,u){var e=u||LoginRadiusDefaults.idPrefix,p=u||LoginRadiusDefaults.classPrefix;a.LRPrefix=u+"##"+LoginRadiusDefaults.idPrefix;if("Captcha"==a.options.loginLockedType){var k=u+LoginRadiusDefaults.idPrefix+"recaptcha_widget_"+c.toLowerCase();a.util.addRecaptchaJS();a.util.captchaSchema(k,b,"hide")}a.$hooks.call("beforeFormRender",c,b);if(LoginRadiusDefaults._uuidFormat.test(a.options.apiKey)){if(LoginRadiusDefaults.isRegFormSchemaLock=!1,LoginRadiusDefaults.isSecurityFormSchemaLock=!1,m.setCustomLabel(b),m.setPlaceholder(b),m.setCustomTitle(b),0<b.length){k=[];var t=document.createElement("form");t.setAttribute("name",e+c);t.setAttribute("method","POST");m.createFormFields(b,t,c,k,p,e,h);b=document.createElement("input");var B=a.buttonsName[c.toLowerCase()]||g[c.toLowerCase()],D=g[c.toLowerCase()].toLowerCase().replace(/ /g,"-");b.type="submit";b.value=B;b.id=e+"submit-"+D;b.setAttribute("class",p+"submit submit-"+e+D);t.appendChild(b);a.options.passwordlessLogin&&"login"===c&&q("passwordlessloginbuttonlabel",t,b,e,p);a.options.passwordlessLoginOTP&&"login"===c&&q("passwordlessLoginOTPButtonLabel",t,b,e,p);a.util.addHTMLContent(d,t,LoginRadiusDefaults.innerHTML);a.$hooks.call("afterFormRender",c,d,p,t);LoginRadiusDefaults.innerHTML=!1;d=new FormValidator(e+c,k,function(b,d){var k=document.getElementsByTagName("form"),g="";if(k[e+c])g=k[e+c];else if("object"==typeof k)for(var n=0;n<k.length;n++)if(k[n].name==e+c){g=k[n];break}a.currentLRContainer=g.parentElement.id;a.$hooks.call("eventCalls",c,p);a.mergeFormErrors&&0<a.mergeFormErrors.length&&(b=a.util.mergeObjects(b,a.mergeFormErrors));k=a.util.elementsByClass(p+"validation-message");for(g=0;g<k.length;g++)k[g].innerHTML="";var m=u+e+"recaptcha_widget";m+="_"+c.toLowerCase();k=a.util.elementById(m+"_tencent");a.options.invisibleRecaptcha&&(window.onCaptchaSubmit=function(b){f(a.util.serialize(t));grecaptcha.reset(window[m+"lr_recaptcha_widgets_idprefix"])});k&&"none"!=k.style.display&&(a.options.tencentCaptcha||a.options.tencentCaptchaAsFallback&&!window.grecaptcha)&&0==b.length&&k.click();if(0<b.length){a.$hooks.call("afterValidation",c);for(k=0;k<b.length;k++)if("g-recaptcha-response"==b[k].Id||b[k].Id===e+""+c+
"-password"&&"login"===c&&(a.options.passwordlessLogin&&window.lrpasswordlesslogin||a.options.passwordlessLoginOTP&&window.lrpasswordlessloginotp)){if(1==b.length||0==b.length)return l(t,f,m,c),!0}else a.options.formValidationMessage&&"resettoken"!=b[k].Name&&(a.util.elementById("validation-"+e+c+"-"+b[k].Name).innerHTML=b[k].Message);a.options.formValidationMessage||h(b)}else l(t,f,m,c);d&&d.preventDefault?d.preventDefault():event&&(event.returnValue=!1)});if(a.validationMessages&&0<a.validationMessages.length)for(k=0;k<a.validationMessages.length;k++)if(d.setMessage(a.validationMessages[k].rule,a.validationMessages[k].message),"valid_date"===a.validationMessages[k].rule||"callback_valid_date"===a.validationMessages[k].rule)var F=a.validationMessages[k].message;d.registerCallback("valid_date",function(a){var b=a.split("/");-1!=a.indexOf("-")&&(b=a.split("-"));a=parseInt(b[1],10);var c=parseInt(b[0],10);b=parseInt(b[2],10);if(1E3>b||3E3<b||0==c||12<c)a=!1;else{var d=[31,28,31,30,31,30,31,31,30,31,30,31];if(0==b%400||0!=b%100&&0==b%4)d[1]=29;a=0<a&&a<=d[c-1]}return a}).setMessage("valid_date",F||"The %s field must contain a valid date.");d.registerCallback("custom_validation",function(a,b){var c=b.split("###")[0];c=(new RegExp(c,"g")).test(a)?!0:!1;return c}).setMessage("custom_validation","The %s field is not valid.");a.Validator=d}}else a.log("apiKey is not in valid guid format.")}}
function LoginRadiusControllers(a,d){function l(b,c,e,f,h,m){d.createForm(a.backupCodeFormSchema,"backupcode",b,function(a){g.backupCodeController(a,c,e,h,m)},function(a){e(a)},f)}function q(b,c,e,f,h,g){a.util.setBrowserStorage(LoginRadiusDefaults.storedTokenName,c.access_token);(function(n){n=JSON.parse(JSON.stringify(n));n=n.RegistrationFormSchema;b.IsDeleted?g(d.loginRadiusErrorTojsError(b)):(a.options.autoFilledFieldForTraditional&&a.$hooks.register("beforeFormRender",function(b,c){if("loginRequiredFieldsUpdate"==b){var d=a.util.findInSchema(c,"name","emailid");d&&d.value&&(d.disabled=!0);(d=a.util.findInSchema(c,"name","phoneid"))&&d.value&&(d.disabled=!0)}}),a.registrationFormSchema=d.mapSchema(n,b,a.options.autoFilledFieldForTraditional),0<a.registrationFormSchema.length?(d.setPasswordRule(a.util.findInSchema(n,"name","password")),d.setPasswordRule(a.util.findInSchema(n,"name","confirmpassword")),a.$hooks.call("registrationSchemaFilter",n,b),f(b,c,c.access_token,e,h,g)):d.loginHandleToken(c,e,h,g))})(a.options)}
function m(b,c,e,f,h){c?a.util.ajaxCall(b,LoginRadiusDefaults.apiDomain+"/auth/customobject/"+e+"?apiKey="+a.options.apiKey+"&access_token="+c+"&objectname="+a.options.customObjectName,"",function(a){a.ErrorCode?h(d.loginRadiusErrorTojsError(a)):f(a)},"CustomObject"):h([d.setMappedMessage(p.twofaTokenValid)])}var p=LoginRadiusDefaults.messages,g=this;g.handleFeatures=function(b,c,e,f,h,g,n){var m=b.Profile;"string"!==typeof c&&(c=a.util.jsonToQueryString(c));f&&a.options.periodicPasswordReset&&m.PasswordExpirationDate&&new Date(m.PasswordExpirationDate)<=new Date?(d.setPasswordRule(a.changePasswordFormSchema[1]),d.setPasswordRule(a.changePasswordFormSchema[2]),f(m,b)):e&&(a.options.askRequiredFieldForTraditionalLogin||LoginRadiusDefaults.autoFilledFieldforPasswordLesLogin)?q(m,b,c,e,h,g):d.loginHandleToken(b,c,h,g,n)};g.verifyOTPController=function(b,c,e,f,h,m){var n=LoginRadiusDefaults.apiDomain+"/auth/phone/otp?apiKey="+a.options.apiKey+"&otp="+b.otp+"&smsTemplate="+a.options.smsTemplateWelcome;b.haveToken&&(n+="&access_token="+a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName));b.onetouchloginflag&&(n=LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/phone/verify?apiKey="+a.options.apiKey+"&otp="+b.otp+"&smsTemplate="+a.options.smsTemplateOneTouchLoginWelcome);a.util.ajaxCall("put",n,c,function(c){c.ErrorCode?f(d.loginRadiusErrorTojsError(c)):b.onetouchloginflag&&!a.options.askRequiredFieldsOnPasswordLessLogin?d.loginHandleToken(c,"",e,f):c.access_token?(LoginRadiusDefaults.autoFilledFieldforPasswordLesLogin=!0,g.handleFeatures(c,b,m,h,e,f)):e(c,b)},"verifyOTP")};g.updateSecurityQuestionController=function(b,c,e){var f=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);b=a.util.parseQueryString(b);for(var h=0;h<a.options.securityQuestionsCount;h++)b[b["securityQuestion"+h]]=b["securityAnswer"+h],delete b["securityQuestion"+h],delete b["securityAnswer"+h];b={SecurityQuestionAnswer:b};f?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account?apikey="+a.options.apiKey+"&access_token="+
f,b,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"updateSecurityQuestion"):e([d.setMappedMessage(p.tokenValid)])};g.resetTwoFactorAuthenticationController=function(b,c,e){var f=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName),h={};h[b]=!0;f?a.util.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/account/2FA/authenticator?apikey="+a.options.apiKey+"&access_token="+f,h,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a,b)},"resetTwoFactorAuthentication"):e([d.setMappedMessage(p.tokenValid)])};g.forgotPasswordController=function(b,c,e,f,h){a.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/password?apiKey="+a.options.apiKey+"&resetPasswordUrl="+(a.options.forgotPasswordUrl||a.options.resetPasswordUrl)+"&emailTemplate="+a.options.resetPasswordEmailTemplate,b,function(g){if(g.ErrorCode)f(d.loginRadiusErrorTojsError(g));else{var n=a.util.parseQueryString(b);e(g,n);a.options.otpEmailVerification&&!a.options.verifyEmailByOTP&&d.resetPassword(c,e,f,h,n)}},"forgotPassword")};g.loginController=function(b,c,e,f,h,m,n,l,k){a.options.verificationEmailTemplate=a.options.emailTemplate||a.options.verificationEmailTemplate;var p="emailTemplate="+a.options.verificationEmailTemplate+"&verificationUrl="+a.options.verificationUrl;a.options.phoneLogin&&(p+="&smsTemplate="+a.options.smsTemplatePhoneVerification);a.options.riskBasedAuthentication&&(p+="&RbaOneclickEmailTemplate="+a.options.rbaOneclickEmailTemplate+"&RbaOTPSmsTemplate="+a.options.rbaOTPSmsTemplate+
"&RbaCityEmailTemplate="+a.options.rbaCityEmailTemplate+"&RbaCountryEmailTemplate="+a.options.rbaCountryEmailTemplate+"&RbaBrowserEmailTemplate="+a.options.rbaBrowserEmailTemplate+"&RbaIpEmailTemplate="+a.options.rbaIpEmailTemplate+"&RbaCitySmsTemplate="+a.options.rbaCitySmsTemplate+"&RbaCountrySmsTemplate="+a.options.rbaCountrySmsTemplate,p+="&RbaBrowserSmsTemplate="+a.options.rbaBrowserSmsTemplate+"&RbaIpSmsTemplate="+a.options.rbaIpSmsTemplate);b=a.util.checkPhoneOrEmailLogin(b);if("string"===typeof b||b instanceof String)b=a.util.parseQueryString(b);a.options.duplicateEmailWithUniqueUsername&&(delete b.email,delete b.phoneid);p=LoginRadiusDefaults.apiDomain+"/auth/login?apiKey="+a.options.apiKey+"&loginUrl="+a.options.loginUrl+"&"+p;b["g-recaptcha-response"]&&(p+="&g-recaptcha-response="+b["g-recaptcha-response"],delete b["g-recaptcha-response"]);b.qq_captcha_randstr&&(p+="&qq_captcha_randstr="+b.qq_captcha_randstr,delete b.qq_captcha_randstr);b.qq_captcha_ticket&&(p+="&qq_captcha_ticket="+
b.qq_captcha_ticket,delete b.qq_captcha_ticket);a.util.ajaxCall("post",p,b,function(p){a.options.stayLogin&&a.util.setBrowserStorage("lr-rememberme",b.stayLogin);p.ErrorCode?("970"==p.ErrorCode&&a.options.otpEmailVerification&&!a.options.verifyEmailByOTP?d.otpEmailVerification(c,e,f,n,b):"1167"==p.ErrorCode&&(p.PhoneId||b.phone)?(delete b.email,b.phone=p.PhoneId||b.phone,g.loginOTPController(b,c,e,f,n,"no")):a.options.phoneLogin&&"1066"==p.ErrorCode&&(d.verifyOTP=l||d.verifyOTP,d.resendOTP=k||d.resendOTP,d.verifyOTP(b,c,e,f,n,h,m),d.resendOTP(b,c,e,f,n,h,m)),f(d.loginRadiusErrorTojsError(p))):g.handleFeatures(p,b,m,h,e,f,n)},"login")};g.loginOTPController=function(b,c,e,f,h,m){var n=b=a.util.checkPhoneOrEmailLogin(b);if("string"===typeof b||b instanceof String)n=a.util.parseQueryString(b);if(n.email||n.username)d.sendSignInEmail(b,e,f,c,h);else{a.$hooks.register("beforeFormRender",function(d,n){a.util.findInSchema(n,"name","resendotp")||n.push({type:"button",name:"resendotp",display:"Resend OTP",rules:"",permission:"r",event:"click",eventCallback:function(a){g.loginOTPController(b,c,e,f,h)}})});var l=function(){d.createForm(a.otpSchema,"otp",c,function(a){g.verifyInstantOTP(a,n,e,f,h+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp",c,h)},function(a){f(d.setMappedMessage(a))},h)};m?l():a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/otp?apiKey="+a.options.apiKey+"&phone="+n.phone+"&smsTemplate="+(a.options.smsTemplateInstantOTPLogin||a.options.passwordlessLoginSMSTemplate),"",function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):(e(a),l())},"loginOTP")}};g.login2FAController=function(b,c,e,f,h,m,n,p,k,t){a.LRCheck2FA=!0;b=a.util.checkPhoneOrEmailLogin(b);var u=function(b,g,u){g=g||"";u=u||"";var q=a.util.getButtonAttribute("sendotp",h);a.options.googleAuthentication&&(!g&&a.options.twoFactorAuthentication||u)&&d.showQRCode(b,c,e,f,h,m,n);if(!g&&!u&&a.options.twoFactorAuthentication)d.updatePhoneNumber=p||d.updatePhoneNumber,d.updatePhoneNumber(c,e,f,h,"",m,n);else if(!u&&a.options.twoFactorAuthentication||g||a.options.optionalTwoFactorAuthentication&&!g&&""!=b.SecondFactorAuthentication.OTPPhoneNo&&null!=b.SecondFactorAuthentication.OTPPhoneNo)if(u)if(h=h||LoginRadiusDefaults.classPrefix,a.options.googleAuthentication){var w=document.getElementsByName(h+"showQRcode")[0];w&&w.appendChild(q)}else a.util.addHTMLContent(c,q);else d.verifyOTP=k||d.verifyOTP,d.resendOTP=t||d.resendOTP,d.verifyOTP(b,c,e,f,h,m,n),d.resendOTP(b,c,e,f,h,m,n);if(g||u)g=a.util.getButtonAttribute("backupcodebutton",h),a.util.addHTMLContent(c,g,!0),a.util.addEvent("click",g,function(a){l(c,e,f,h,m,n)});a.util.addEvent("click",q,function(a){d.resendOTPManually("phoneNo2FA="+b.SecondFactorAuthentication.OTPPhoneNo,c,e,f,h,m,n);d.verifyOTP=k||d.verifyOTP;d.resendOTP=t||d.resendOTP;d.verifyOTP(b,c,e,f,h,m,n);d.resendOTP(b,c,e,f,h,m,n)})},q=LoginRadiusDefaults.apiDomain+"/auth/login/2FA/";a.options.verificationEmailTemplate=a.options.emailTemplate||a.options.verificationEmailTemplate;var w="post";window.lrbackupcode?(q=q+"backupcode?apiKey="+a.options.apiKey+"&"+b,w="get",postBody=""):(q=q+"?apiKey="+a.options.apiKey+"&loginUrl="+a.options.loginUrl+"&emailTemplate="+a.options.verificationEmailTemplate+"&verificationUrl="+a.options.verificationUrl+"&smsTemplate="+a.options.smsTemplateWelcome+"&smsTemplate2FA="+a.options.smsTemplate2FA,postBody=a.util.parseQueryString(b));a.util.ajaxCall(w,q,postBody,function(l){a.options.stayLogin&&a.util.setBrowserStorage("lr-rememberme",a.util.getQueryParameterByName("stayLogin",b));if(l.ErrorCode){if(a.options.phoneLogin&&"1066"==l.ErrorCode){var p="phone="+a.util.getQueryParameterByName("phone",b);p+="&noPhoneVerified=false";a.options.optionalTwoFactorAuthentication=!1;a.options.twoFactorAuthentication=!1;d.verifyOTP=k||d.verifyOTP;d.resendOTP=t||d.resendOTP;d.verifyOTP(p,c,e,f,h,m,n);d.resendOTP(p,c,e,f,h,m,n)}f(d.loginRadiusErrorTojsError(l))}else l.SecondFactorAuthentication?(a.util.setBrowserStorage(LoginRadiusDefaults.storedTwoFAToken,l.SecondFactorAuthentication.SecondFactorAuthenticationToken),a.util.setBrowserStorage(LoginRadiusDefaults.storedOTPAuth,l.SecondFactorAuthentication.IsOTPAuthenticatorVerified),"00000000-0000-0000-0000-000000000000"==l.access_token&&u(l,l.SecondFactorAuthentication.IsOTPAuthenticatorVerified,l.SecondFactorAuthentication.IsGoogleAuthenticatorVerified)):g.handleFeatures(l,b,n,m,e,f,h)},"login")};g.resendOTPController=function(b,c,e,f,h,g){f=LoginRadiusDefaults.apiDomain+"/auth/phone/otp?apiKey="+a.options.apiKey+"&smsTemplate="+(b.updatePhone?a.options.smsTemplateUpdatePhone:a.options.smsTemplatePhoneVerification);h="post";b.onetouchloginflag&&(h="get","string"!==typeof b&&(b=a.util.jsonToQueryString(b)),f=LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/phone?apikey="+a.options.apiKey+"&"+b+"&smstemplate="+a.options.smsTemplatePhoneVerification);a.util.ajaxCall(h,f,b,function(b){b.ErrorCode?e(d.loginRadiusErrorTojsError(b)):(a.log(p.otpSent),c(b))},"resendOTP")};g.resendOTP2FAController=function(b,c,e,f,h,g){f=a.util.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken);(h=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName))&&!a.LRCheckLogin?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apiKey="+a.options.apiKey+"&access_token="+h+"&smsTemplate="+a.options.smsTemplate2FA,b,function(b){b.ErrorCode?e(d.loginRadiusErrorTojsError(b)):(a.log(p.otpSent),c(b))},"resendOTP"):f?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/resend?apiKey="+a.options.apiKey+"&SecondFactorAuthenticationToken="+f+"&smsTemplate2FA="+a.options.smsTemplate2FA,"",function(b){b.ErrorCode?e(d.loginRadiusErrorTojsError(b)):a.log(p.otpSent)},"resendOTP"):e([d.setMappedMessage(p.twofaTokenValid)])};g.verify2FAOTPController=function(b,c,e,f,h){var m=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName),n=a.util.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken);m&&!a.LRCheckLogin?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA/Verification?apiKey="+a.options.apiKey+"&access_token="+m+"&"+b+"&smsTemplate="+a.options.smsTemplate2FAWelcome,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a,b)},"verifyOTP##twofaotp"):n?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/Verification?apiKey="+a.options.apiKey+"&SecondFactorAuthenticationToken="+n+"&"+b+"&smsTemplate2FA="+a.options.smsTemplate2FAWelcome,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):g.handleFeatures(a,b,h,f,c,e)},"verifyOTP##twofaotp"):e([d.setMappedMessage(p.twofaTokenValid)])};g.backupCodeController=function(b,c,e,f,h){var m=a.util.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken);m?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/backupcode?apiKey="+a.options.apiKey+"&SecondFactorAuthenticationToken="+m+"&"+b+"&smsTemplate2FA="+a.options.smsTemplate2FAWelcome,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):g.handleFeatures(a,b,h,f,c,e)},"login"):e([d.setMappedMessage(p.twofaTokenValid)])};g.checkPhoneNumberAvailabilityController=function(b,c,e){a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+
"/auth/phone?apiKey="+a.options.apiKey+"&"+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"checkPhone")};g.update2FAPhoneNumberController=function(b,c,e,f,h,g,n,m,k){var l=a.util.getBrowserStorage(LoginRadiusDefaults.storedTwoFAToken),u=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);u&&!a.LRCheckLogin?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apiKey="+a.options.apiKey+"&access_token="+u+"&smsTemplate="+a.options.smsTemplate2FA,b,function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):(d.verifyOTP=m||d.verifyOTP,d.resendOTP=k||d.resendOTP,d.verifyOTP(b,c,e,f,h,g,n),d.resendOTP(b,c,e,f,h,g,n),e(a,b))},"updatePhone"):l?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/2FA/?apiKey="+a.options.apiKey+"&SecondFactorAuthenticationToken="+l+"&smsTemplate2FA="+a.options.smsTemplate2FA,b,function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):(e(a,b),d.verifyOTP=m||d.verifyOTP,d.resendOTP=k||d.resendOTP,d.verifyOTP(b,c,e,f,h,g,n),d.resendOTP(b,c,e,f,h,g,n))},"login"):f([d.setMappedMessage(p.twofaTokenValid)])};g.updatePhoneNumberController=function(b,c,e,f,h,g,n,m,k){var l=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);l?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/phone?apiKey="+a.options.apiKey+"&access_token="+l+"&smsTemplate="+a.options.smsTemplateUpdatePhone,b,function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):(d.verifyOTP=m||d.verifyOTP,d.resendOTP=k||d.resendOTP,d.verifyOTP(b+"&haveToken=true",c,e,f,h,g,n),d.resendOTP(b+"&updatePhone=true",c,e,f,h,g,n),e(a,b))},"updatePhone"):f([d.setMappedMessage(p.tokenValid)])};g.resetPasswordByPhoneController=function(b,c,e,f,h){a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/otp?apiKey="+a.options.apiKey+"&smsTemplate="+a.options.smsTemplateWelcome,b,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a,b)},"resetPassword")};g.forgotPasswordbyPhoneController=function(b,c,e,f,h,g){a.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+
"/auth/password/otp?apiKey="+a.options.apiKey+"&smsTemplate="+a.options.smsTemplateForgot,b,function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):(e(a,b),resetPassword=g||d.resetPassword,resetPassword(c,e,f,h))},"forgotPassword")};g.registrationController=function(b,c,e,f,h,g,n,m){a.LRCheckRegistration=!0;var k=b;a.LRApiFrameWork||(k=d.mapRegistrationSchema(g,b));g="emailTemplate="+a.options.verificationEmailTemplate+"&verificationUrl="+a.options.verificationUrl;a.options.phoneLogin&&(g+="&smsTemplate="+
a.options.smsTemplatePhoneVerification);var l="";a.options.invisibleRecaptcha||a.options.v2Recaptcha||a.options.tencentCaptcha?l=LoginRadiusDefaults.apiDomain+"/auth/register/captcha?apiKey="+a.options.apiKey+"&"+g:a.options.sott?(l=LoginRadiusDefaults.apiDomain+"/auth/register?apiKey="+a.options.apiKey+"&"+g,a.options.enableHeaderSott?(a.options.sott=decodeURIComponent(a.options.sott),k.sottcheck=!0):l+="&sott="+a.util.encodedString(a.options.sott)):a.log("url is not set as sott option is not defined");""!==l&&a.util.ajaxCall("post",l,k,function(g){if(g.ErrorCode||g.errorCode)1049==g.ErrorCode?(f([d.setMappedMessage(p.invalidSott)]),a.log(g.Description)):f(d.loginRadiusErrorTojsError(g));else if(a.options.phoneLogin&&-1!==b.indexOf("phoneid"))d.verifyOTP=n||d.verifyOTP,d.resendOTP=m||d.resendOTP,d.verifyOTP(b,c,e,f,h),d.resendOTP(b,c,e,f,h);else{var k=a.util.parseQueryString(b);a.options.disabledEmailVerification||a.options.optionalEmailVerification?(g.Data&&(g=g.Data,delete g.Data,delete g.IsPosted),a.options.askRequiredFieldForTraditionalLogin=!1,a.options.otpEmailVerification&&!a.options.verifyEmailByOTP?(a.$hooks.register("beforeFormRender",function(c,h){"otp"!=c||a.util.findInSchema(h,"name","skip")||h.push({type:"button",name:"skip",display:"Skip",rules:"",permission:"r",event:"click",eventCallback:function(a){d.loginHandleToken(g,b,e,f)}})}),d.otpEmailVerification(c,function(a){a.access_token||d.loginHandleToken(g,b,e,f)},f,h,k)):d.loginHandleToken(g,b,e,f)):(e(g,k),a.options.otpEmailVerification&&!a.options.verifyEmailByOTP&&d.otpEmailVerification(c,e,f,h,k))}},"registration")};g.periodicalPasswordRestController=function(b,c,e,f,h,g){a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password?apiKey="+a.options.apiKey+"&access_token="+h.access_token,b,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):d.loginHandleToken(h,g,c,e)},"periodicPassword")};g.changePasswordController=function(b,c,e){a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password?apiKey="+a.options.apiKey+
"&access_token="+a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName),b,function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):c(f,a.util.parseQueryString(b))},"changePassword")};g.resendEmailVerificationController=function(b,c,e){a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/register?apiKey="+a.options.apiKey+"&verificationUrl="+a.options.verificationUrl+"&emailTemplate="+a.options.verificationEmailTemplate,b,function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):c(f,a.util.parseQueryString(b))},"resendVerificationEmail")};g.addEmailController=function(b,c,e){var f=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);f?a.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+a.options.apiKey+"&access_token="+f+"&verificationUrl="+a.options.verificationUrl+"&emailTemplate="+a.options.addEmailTemplate,b,function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):c(f,a.util.parseQueryString(b))},"addEmail"):e([d.setMappedMessage(p.tokenValid)])};g.removeEmailController=function(b,c,e){var f=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);f?a.util.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+a.options.apiKey+"&access_token="+f,b,function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):c(f,a.util.parseQueryString(b))},"removeEmail"):e([d.setMappedMessage(p.tokenValid)])};g.changeUsernameController=function(b,c,e){var f=a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName);f?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/username?apiKey="+a.options.apiKey+"&access_token="+f,b,function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):c(f,a.util.parseQueryString(b))},"changeUsername"):e([d.setMappedMessage(p.tokenValid)])};g.resetPasswordController=function(b,c,e,f,h){b+="&welcomeEmailTemplate="+a.options.welcomeEmailTemplate+"&ResetPasswordEmailTemplate="+a.options.resetPasswordConfirmationEmailTemplate;a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/reset?apiKey="+
a.options.apiKey,b,function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):c(f,a.util.parseQueryString(b))},"resetPassword")};g.emailVerificationController=function(b,c,e,f,h,g){f="get";if(b){h=LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+a.options.apiKey+"&welcomeEmailTemplate="+a.options.welcomeEmailTemplate;var n="";g?(f="put",n=b):h+="&verificationtoken="+b+"&url="+a.options.verificationUrl;b="##otp";a.options.verifyEmailByOTP&&(b="");a.util.ajaxCall(f,h,n,function(b){b.ErrorCode?e(d.loginRadiusErrorTojsError(b)):a.options.loginOnEmailVerification?null==b.Data?c(b):d.loginHandleToken(b.Data,"",c,e):a.options.logoutOnVerifyEmail?d.logout(c(b)):c(b)},"verifyEmail"+b)}else g?e([p.notFound]):e([p.vTokenError])};g.deleteUserConfirmController=function(b,c,e){b?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/delete?apiKey="+a.options.apiKey+"&deletetoken="+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"deleteUserConfirm"):e([p.vTokenError])};g.checkEmailAvailabilityController=function(b,c,e){a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/email?apiKey="+a.options.apiKey+"&"+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"checkEmail")};g.checkUserNameAvailabilityController=function(b,c,e){a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/username?apiKey="+a.options.apiKey+"&"+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"checkUsername")};g.resetPasswordBySecurityQuestionController=function(b,c,e){var f=a.util.parseQueryString(b),h={},g;for(g in f)"email"!==g&&"username"!==g&&"phone"!==g&&"password"!==g&&(h[g]=f[g],delete f[g]);f.securityanswer=h;a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/password/securityanswer/?apikey="+a.options.apiKey,f,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a,b)},"resetPasswordBySecurityQuestion")};g.getSecurityQuestionsController=function(b,c,e){var f="/auth/securityquestion/";f=-1!==b.indexOf("username")?f+"username?apiKey=":-1!==b.indexOf("phone")?f+"phone?apiKey=":f+"email?apiKey=";a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+f+a.options.apiKey+"&"+b,"",function(b){if(b.ErrorCode)e(d.loginRadiusErrorTojsError(b));else{for(var f=[],h=0;h<b.length;h++){var g={};g.type=a.options.maskSensitiveInput?"password":"string";g.name=b[h].QuestionId;g.display=b[h].Question;g.rules="required";g.permission="r";f.push(g)}c(f)}},"securityQuestion")};g.getBackupCodeController=function(b,c,e){b?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA/backupcode?apikey="+
a.options.apiKey+"&access_token="+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"backupCode"):e([d.setMappedMessage(p.twofaTokenValid)])};g.resetBackupCodeController=function(b,c,e){b?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA/backupcode/reset?apikey="+a.options.apiKey+"&access_token="+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"backupCode"):e([d.setMappedMessage(p.twofaTokenValid)])};g.getSocialDataController=function(b,c,e,f,h){b?(f+="?access_token="+b,h&&(f=f+"&"+h),a.util.ajaxCall("get",LoginRadiusDefaults.socialApiDomain+f,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"socialAPI")):e([d.setMappedMessage(p.twofaTokenValid)])};g.postSocialDataController=function(b,c,e,f,h,g){b?(f+="?access_token="+b,h&&(f=f+"&"+h),a.util.ajaxCall("post",LoginRadiusDefaults.socialApiDomain+f,g,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"socialAPI")):e([d.setMappedMessage(p.twofaTokenValid)])};g.createCustomObjectController=function(b,c,e,f){b?a.util.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/customobject?apiKey="+a.options.apiKey+"&access_token="+b+"&objectname="+a.options.customObjectName,c,function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):e(a)},"createCustomObject"):f([d.setMappedMessage(p.twofaTokenValid)])};g.getCustomObjectByIdController=function(a,c,d,f){m("get",a,c,d,f)};g.getCustomObjectsController=function(b,c,e){b?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+
"/auth/customobject?apiKey="+a.options.apiKey+"&access_token="+b+"&objectname="+a.options.customObjectName,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"getCustomObject"):e([d.setMappedMessage(p.twofaTokenValid)])};g.updateCustomObjectController=function(b,c,e,f,h,g){if(b){var m="";f&&(m="&updatetype="+f);a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/customobject/"+c+"?apiKey="+a.options.apiKey+"&access_token="+b+"&objectname="+a.options.customObjectName+m,e,function(a){a.ErrorCode?g(d.loginRadiusErrorTojsError(a)):h(a)},"updateCustomObject")}else g([d.setMappedMessage(p.twofaTokenValid)])};g.deleteCustomObjectController=function(a,c,d,f){m("delete",a,c,d,f)};g.updateData=function(b,c,e,f,h,m,n,l,k){var q=b.Profile||b.Data,u=d.mapRegistrationSchema(n,e,q),w=b.access_token;k=k||a.setHostedToken;l=l||"updateData";a.options.verificationEmailTemplate=a.options.emailTemplate||a.options.verificationEmailTemplate;0<Object.keys(u).length?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+
"/auth/account?apiKey="+a.options.apiKey+"&access_token="+w+"&verificationUrl="+a.options.verificationUrl+"&emailTemplate="+a.options.verificationEmailTemplate,u,function(l){if(l.ErrorCode)h(d.loginRadiusErrorTojsError(l));else{var t=function(b){var k=u.emailid||u.email;var t=u.phone||u.phoneid;var z=a.util.findInSchema(n,"name","phoneid");z=z&&-1!=z.rules.indexOf("required");var D=a.util.findInSchema(n,"name","emailid");D=D&&-1!=D.rules.indexOf("required");a.util.setBrowserStorage(LoginRadiusDefaults.storedUidName,q.Uid);var A=a.util.parseQueryString(window.location.search.replace("?",""));(void 0==t||t)&&q.PhoneIdVerified&&void 0==k||(void 0==k||k)&&q.EmailVerified&&void 0==t||(t&&!z||void 0==t)&&(a.options.disabledEmailVerification||a.options.optionalEmailVerification)?k&&!q.EmailVerified&&A.return_url&&-1!=A.return_url.toLowerCase().indexOf("/saml/")?h([d.setMappedMessage(p.emailNotVerified)]):(delete l.IsPosted,l.access_token=w,b(),LoginRadiusDefaults.isSSOInitFired&&d.setToken(w)):t&&q&&!q.PhoneIdVerified?(b={phone:a.util.getQueryParameterByName("phoneid",e)},g.resendOTPController(b,function(){var b=new setLoginRadiusCommonFunctions(a);b.verifyOTP(e,c,f,h,m);b.resendOTP(e+"&noPhoneVerified=false",c,f,h,m)},h,m+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp",c,m)):!k||!D||q.EmailVerified||a.options.disabledEmailVerification||a.options.optionalEmailVerification?b():h([d.setMappedMessage(p.emailNotVerified)])};k?t(function(){b.Data=b.Profile;delete b.Profile;l.Data&&(b.Data=l.Data);d.loginHandleToken(b,e,f,h)}):t(function(){l.Data&&(l.Profile=l.Data,delete l.Data,delete l.IsPosted);l.access_token?d.loginHandleToken(l,e,f,h):f(l,a.util.parseQueryString(e))})}},l):d.loginHandleToken(b,e,f,h)};g.oneTouchLoginController=function(b,c,e,f,h){b=a.util.checkPhoneOrEmailLogin(b);var m=function(b,e,f,m,l,n){d.createForm(a.registrationFormSchema,"loginRequiredFieldsUpdate",c,function(d){var e={};e.Profile=b;e.access_token=f;g.updateData(e,c,d,l,n,h,a.registrationFormSchema,"login",!0)},function(a){n(d.setMappedMessage(a))})};if(a.util.parseQueryString(b).phone)a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/phone?apikey="+a.options.apiKey+"&"+b+"&smstemplate="+a.options.smsTemplateOneTouchLogin,"",function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):(d.verifyOTP(b+"&onetouchloginflag=true",c,e,f,h,"",m),d.resendOTP(b+"&onetouchloginflag=true",c,e,f,h,"",m))},"oneTouchLogin");else{var l=a.util.randomString(16);a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/onetouchlogin/email?apikey="+
a.options.apiKey+"&"+b+"&clientGuid="+l+"&onetouchloginemailtemplate="+(a.options.noRegistrationEmailTemplate||a.options.onetouchLoginEmailTemplate)+"&welcomeemailtemplate="+a.options.welcomeEmailTemplate+"&redirectUrl="+a.options.onetouchLoginRedirectUrl,"",function(c){c.ErrorCode?f(d.loginRadiusErrorTojsError(c)):c.IsPosted&&(e(c),d.pingForSmartLogin(l,function(c){a.options.askRequiredFieldsOnPasswordLessLogin?(LoginRadiusDefaults.autoFilledFieldforPasswordLesLogin=!0,g.handleFeatures(c,b,m,"",e,f)):d.loginHandleToken(c,"",e,f)},f))},"oneTouchLogin")}};g.smartLoginController=function(b,c,e){a.util.parseQueryString(b);var f=a.util.randomString(16);a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/smartlogin?apikey="+a.options.apiKey+"&"+b+"&clientGuid="+f+"&smartloginemailtemplate="+(a.options.autoLoginEmailTemplate||a.options.smartLoginEmailTemplate)+"&welcomeemailtemplate="+a.options.welcomeEmailTemplate+"&redirectUrl="+(a.options.autoLoginRedirectUrl||a.options.smartLoginRedirectUrl),"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):a.IsPosted&&(c(a),d.pingForSmartLogin(f,function(a){d.loginHandleToken(a,"",c,e)},e))},"smartLogin")};g.verifyInstantOTP=function(b,c,e,f,g,m,l){a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/otp/verify?apiKey="+a.options.apiKey+"&smsTemplate="+a.options.smsTemplateWelcome,"phone="+c.phone+"&"+b,function(a){a.ErrorCode?f(d.loginRadiusErrorTojsError(a)):d.loginHandleToken(a,b,e,f)},"login##otp")};g.socialLoginReceiveToken=function(b,c,e,f,h,m,l){a.options.verificationEmailTemplate=a.options.emailTemplate||a.options.verificationEmailTemplate;a.util.setBrowserStorage(LoginRadiusDefaults.storedTokenName,b);l=l&&0<l.length?l:a.options.RegistrationFormSchema;(function(l){var k=JSON.parse(JSON.stringify(l));a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+a.options.apiKey+"&access_token="+b+"&verificationUrl="+a.options.verificationUrl+"&emailTemplate="+a.options.verificationEmailTemplate,"",function(n){if(n.ErrorCode)f(d.loginRadiusErrorTojsError(n));else if(a.LRCheckLogin=!0,n.IsDeleted)f([d.setMappedMessage(p.blockedUser)]);else{var q={};q.Profile=n;q.access_token=b;d.setPasswordRule(a.util.findInSchema(k,"name","password"));d.setPasswordRule(a.util.findInSchema(k,"name","confirmpassword"));var t=!1;a.options.autoFilledFieldForSocial&&(t=!0,a.$hooks.register("beforeFormRender",function(b,c){if("socialRegistration"==b){var d=a.util.findInSchema(c,"name","emailid");d&&d.value&&(d.disabled=!0);(d=a.util.findInSchema(c,"name","phoneid"))&&d.value&&(d.disabled=!0)}}));a.registrationFormSchema=d.mapSchema(k,n,t);a.$hooks.call("registrationSchemaFilter",k,n);t=a.util.getBrowserStorage("LRTraditionalLogin");a.util.removeBrowserStorage("LRTraditionalLogin");if(0<a.registrationFormSchema.length&&!t)c?(a.$hooks.call("socialLoginFormRender"),d.createForm(a.registrationFormSchema,"socialRegistration",c,function(b){g.updateData(q,c,b,e,f,h,a.registrationFormSchema,"socialLogin")},function(a){f(a)},h)):m(b,a.registrationFormSchema,n);else{var u=(t=(t=a.util.findInSchema(l,"name","phoneid"))&&-1!=t.rules.indexOf("required"))?n.PhoneIdVerified?!0:!1:n.PhoneIdVerified,w=a.util.findInSchema(l,"name","emailid"),z=(w=w&&-1!=w.rules.indexOf("required"))?n.EmailVerified?!0:!1:n.EmailVerified;(u||!u&&!t)&&(z||!z&&!w)||(u||!u&&!t)&&(a.options.disabledEmailVerification||a.options.optionalEmailVerification)?(a.util.setBrowserStorage(LoginRadiusDefaults.storedUidName,n.Uid),LoginRadiusDefaults.isSSOInitFired&&d.setToken(b),d.loginHandleToken(q,"",e,f)):null==n.Email||n.EmailVerified?(t={phone:n.PhoneId},f([d.setMappedMessage(p.phoneNotVerified)],t),g.resendOTPController(t,function(){a.socialLoginFlag=!0;d.verifyOTP("phone="+n.PhoneId,c,e,f,h);d.resendOTP("phone="+n.PhoneId+"&noPhoneVerified=false",c,e,f,h)},f,h+LoginRadiusDefaults.idPrefix+"recaptcha_widget_verifyotp",c,h)):f([d.setMappedMessage(p.emailNotVerified)])}}},"socialLogin")})(l)};g.accountLinkingReceiveToken=function(b,c,e){a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/socialidentity?apiKey="+
a.options.apiKey+"&access_token="+b,"",function(f){f.ErrorCode?e(d.loginRadiusErrorTojsError(f)):f.Uid!=a.util.getBrowserStorage(LoginRadiusDefaults.storedUidName)?a.util.ajaxCall("put",LoginRadiusDefaults.apiDomain+"/auth/socialidentity?apiKey="+a.options.apiKey+"&access_token="+a.util.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"candidatetoken="+b,function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"linkAccount"):c({IsPosted:!0})},"linkAccount")};g.validateToken=function(b,c,e){b?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/access_token/Validate?apikey="+a.options.apiKey+"&access_token="+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"validateToken"):e([setMappedMessage(p.twofaTokenValid)])};g.invalidateToken=function(b,c,e){b?a.util.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/access_token/InValidate?apikey="+a.options.apiKey+"&access_token="+b,"",function(a){a.ErrorCode?e(d.loginRadiusErrorTojsError(a)):c(a)},"invalidateToken"):e([setMappedMessage(p.twofaTokenValid)])}}
var LoginRadiusV2=function(a){function d(a){if(r.options.stayLogin){for(var b=!0,c=0;c<a.length;c++)"stayLogin"===a[c].name&&(b=!1);b&&a.push({type:"multi",name:"stayLogin",display:"Remember me",rules:null,permission:"w"})}return a}function l(a,b,c,d){a&&v.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/login/passwordlesslogin/email/verify?apiKey="+r.options.apiKey+"&verificationtoken="+a+"&welcomeEmailTemplate="+r.options.welcomeEmailTemplate,"",function(a){a.ErrorCode?c(x.loginRadiusErrorTojsError(a)):x.loginHandleToken(a,"",b,c,d)},"passwordlessLogin")}function q(a,b,c){var d=v.getHashParam("vtoken"),e=v.getHashParam("vtype");"oneclicksignin"!=e&&"passwordlesslogin"!=e||r.passwordlessLoginFlag||(r.passwordlessLoginFlag=!0,l(d,a,b,c))}function m(a,b,c,e){var f=v.getHashParam("vtoken"),g=v.getHashParam("vtype");"oneclicksignin"!=g&&"passwordlesslogin"!=g||r.passwordlessLoginFlag||(r.passwordlessLoginFlag=!0,l(f,b,c,e));f=r.loginFormSchema;r.loginAction=!0;H(f);f=JSON.parse(JSON.stringify(d(f)));x.setPasswordRule(f[1],r.loginAction);x.createForm(f,"login",a,function(d){r.LRCheckLogin=!0;if(window.lrpasswordlesslogin)x.sendSignInEmail(d,b,c,a,e);else if(window.lrpasswordlessloginotp)x.sendSignInEmail(d,b,c,a,e);else{var f=function(b,c,d,f,g,h){x.createForm(r.registrationFormSchema,"loginRequiredFieldsUpdate",a,function(c){var f={};f.Profile=b;f.access_token=d;y.updateData(f,a,c,g,h,e,r.registrationFormSchema,"login",!0)},function(a){h(x.setMappedMessage(a))})},g=function(e,f){x.createForm(r.changePasswordFormSchema,"changepassword",a,function(a){y.periodicalPasswordRestController(a,b,c,e,f,d)},function(a){c(a)})};r.options.twoFactorAuthentication||r.options.optionalTwoFactorAuthentication?y.login2FAController(d,a,b,c,e,g,f):y.loginController(d,a,b,c,g,f,e)}},function(a){c(x.setMappedMessage(a))},e)}function p(a,b,c,d,e){r.$hooks.call("registrationSchemaFilter",e);var f=d+LoginRadiusDefaults.idPrefix+"recaptcha_widget_registration";v.captchaSchema(f,e);e.push({type:"html",name:"termsandcondition",html:r.options.termsAndConditionHtml||""});x.setPasswordRule(v.findInSchema(e,"name","password"));x.setPasswordRule(v.findInSchema(e,"name","confirmpassword"));r.registrationFormSchema=e;x.createForm(e,"registration",a,function(g){y.registrationController(g,a,function(a,c){window.grecaptcha&&r.options.v2Recaptcha&&grecaptcha.reset(window[f+"lr_recaptcha_widgets_idprefix"]);b(a,c)},function(a){window.grecaptcha&&r.options.v2Recaptcha&&grecaptcha.reset(window[f+"lr_recaptcha_widgets_idprefix"]);c(a)},d,e)},function(a){window.grecaptcha&&r.options.v2Recaptcha&&grecaptcha.reset(window[f+"lr_recaptcha_widgets_idprefix"]);c(a)},d);v.renderV2Recaptcha(f,!0)}function g(a,b,c,d){v.addRecaptchaJS();r.registrationFormSchema=r.registrationFormSchema&&0<r.registrationFormSchema.length?r.registrationFormSchema:r.options.RegistrationFormSchema;(function(e){var f=JSON.parse(JSON.stringify(e));e=[];for(var g=0;g<f.length;g++)if(f[g]&&r.options.showSplitForm&&f[g].DataSource&&null!==f[g].DataSource){var h=JSON.parse(JSON.stringify(f[g])),k=JSON.parse(JSON.stringify(v.findInSchema(f,"name","cf_"+f[g].DataSource+"Code")));h.name="recordid";k.name="code";e.push(h);e.push(k)}0<e.length&&r.options.showSplitForm?x.createForm(e,"validatecode",a,function(e){v.ajaxCall("post",LoginRadiusDefaults.apiDomain+"/auth/registrationdata/validatecode?apiKey="+r.options.apiKey,e,function(e){1==e.IsValid?p(a,b,c,d,f):c(e)},"registration")}):(r.options.securityQuestionEnabled&&r.options.SecurityQuestions&&E(f,!0),p(a,b,c,d,f))})(r.registrationFormSchema)}function b(a,b,c,d){var e=r.forgotPasswordFormSchema;H(e);x.createForm(e,"forgotpassword",a,function(e){e=v.checkPhoneOrEmailLogin(e);-1!=e.indexOf("phoneApi=1")?(LoginRadiusDefaults.LRPhoneNo=e,y.forgotPasswordbyPhoneController(e,a,b,c,d)):y.forgotPasswordController(e,a,b,c,d)},function(a){c(a)},d)}function c(a,b,c,d){var e=r.changePasswordFormSchema;x.setPasswordRule(v.findInSchema(e,"name","newpassword"));x.setPasswordRule(v.findInSchema(e,"name","confirmnewpassword"));x.createForm(e,"changepassword",a,function(a){y.changePasswordController(a,b,c)},function(a){c(a)},d)}function e(a,b,c,d){x.createForm(r.emailSchema,"resendEmailVerification",a,function(a){y.resendEmailVerificationController(a,b,c)},function(a){c(a)},d)}function f(a,b,c,d){x.createForm(r.addEmailSchema,"addemail",a,function(a){y.addEmailController(a,b,c)},function(a){c(a)},d)}function h(a,b,c,d){x.createForm(r.emailSchema,"removeemail",a,function(a){y.removeEmailController(a,b,c)},function(a){c(a)},d)}function u(a,b,c,d){x.createForm(r.changeUsernameFormSchema,"changeUsername",a,function(a){y.changeUsernameController(a,b,c)},function(a){c(a)},d)}function n(a,b,c,d){var e=function(e){var f=v.getHashParam("vtoken");if(r.options.verifyEmailByOTP){var g={};e&&(g=v.mergeOptions(g,v.parseQueryString(e)));g.otp=f;g.email=v.getQueryParameterByName("email").replace(/ /g,"+");y.emailVerificationController(g,a,b,c,d,!0)}else y.emailVerificationController(f,a,b,c,d)};c&&"Captcha"==r.options.loginLockedType&&(r.$hooks.register("afterFormRender",function(a,b,c,d){d&&"loginradius-verifyemail"==d.name&&"loginradius-submit-verify"==d[0].id&&(d[0].style.display="none")}),x.createForm([],"verifyemail",c,function(a){e(a)},function(a){b(a)},d));e()}function w(a,b){var c=r.sessionData.getToken();c?v.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+r.options.apiKey+"&access_token="+c+"&deleteUrl="+r.options.deleteUrl+"&emailTemplate="+r.options.deleteUserEmailTemplate,{},function(c){c.ErrorCode?b(x.loginRadiusErrorTojsError(c)):a(c)},"deleteUser"):b([G.vTokenError])}function k(a,b){var c=v.getHashParam("vtoken");y.deleteUserConfirmController(c,a,b)}function t(a,b,c,d){window.html5passToken=function(e){if(!O){O=!0;a=LoginRadiusDefaults.socialRegFormId||a;var f=r.util.getBrowserStorage("LRSetSafariToken");f&&(r.$hooks.call("getCurrentActionOptions",f),b=LRSafarionSuccess||b,c=LRSafarionError||c);y.socialLoginReceiveToken(e,a,b,c,d)}};var e=v.getHashParam("lr-token");e&&window.html5passToken(e);r.loginRadiusHtml5PassToken=window.html5passToken;r.options.isMobile||r.options.noCallbackForSocialLogin?r.$hooks.register("socialCalls",function(e,f){r.options.noCallbackForSocialLogin&&x.pingForSmartLogin(f,function(e){e.access_token?y.socialLoginReceiveToken(e.access_token,a,b,c,d):b(e)},function(){})}):v.addEvent("message",window,function(e){if(-1!=e.origin.indexOf(r.options.customDomain)||-1!=e.origin.indexOf(LoginRadiusDefaults.hubDomain))a=LoginRadiusDefaults.socialRegFormId||a,"string"==typeof e.data&&P.test(e.data)&&y.socialLoginReceiveToken(e.data,a,b,c,d)})}function B(a,b,c,d){v.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apikey="+r.options.apiKey+"&access_token="+v.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"",function(d){if(d.IsOTPAuthenticatorVerified||d.IsGoogleAuthenticatorVerified)d=document.createElement("input"),d.setAttribute("type","button"),d.setAttribute("value",r.buttonsName.backupcode||K.backupCode),v.addHTMLContent(a,d),v.addEvent("click",d,function(a){r.api.getBackupCode(v.getBrowserStorage(LoginRadiusDefaults.storedTokenName),b,c)})})}function D(a,b,c,d){v.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apikey="+r.options.apiKey+"&access_token="+v.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"",function(d){if(d.IsOTPAuthenticatorVerified||d.IsGoogleAuthenticatorVerified)d=document.createElement("input"),d.setAttribute("type","button"),d.setAttribute("value",r.buttonsName.resetbackupcode||K.resetBackupCode),v.addHTMLContent(a,d),v.addEvent("click",d,function(a){r.api.resetBackupCode(v.getBrowserStorage(LoginRadiusDefaults.storedTokenName),b,c)})})}function F(a,b,c,d){var e=document.createElement("input");e.setAttribute("type","button");e.setAttribute("value",r.buttonsName.createtwofactorauthentication||K.createtwofactorauthentication);var f=d||LoginRadiusDefaults.classPrefix;document.getElementsByName(f+"profileeditor")[0]?r.options.showTwoFactorOnProfile&&document.getElementsByName(f+"profileeditor")[0].appendChild(e):(r.options.twoFactorAuthentication||r.options.optionalTwoFactorAuthentication)&&v.addHTMLContent(a,e);v.addEvent("click",e,function(d){r.options.optionalTwoFactorAuthentication||r.options.twoFactorAuthentication?v.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account/2FA?apikey="+r.options.apiKey+"&access_token="+v.getBrowserStorage(LoginRadiusDefaults.storedTokenName),"",function(d){r.LRCheck2FA=!0;r.LRCheckLogin=!1;if(d.ErrorCode)c(x.loginRadiusErrorTojsError(d));else{v.setBrowserStorage(LoginRadiusDefaults.storedOTPAuth,d.IsOTPAuthenticatorVerified);v.setBrowserStorage(LoginRadiusDefaults.storedGAAuth,d.IsGoogleAuthenticatorVerified);var e=d.IsOTPAuthenticatorVerified;r.options.googleAuthentication&&(x.showQRCode(d,a,b,c,f),LoginRadiusDefaults.innerHTML=!0);e?x.changeNumberForm(a,"",b,c,f,LoginRadiusDefaults.innerHTML):x.updatePhoneNumber(a,b,c,f)}},"createTwoFactorAuthentication"):r.log("Two Factor Authentication will not work, please set in commonOpitons either twoFactorAuthentication or optionalTwoFactorAuthentication")})}function A(a,b,c,d){var e=v.getBrowserStorage(LoginRadiusDefaults.storedTokenName);e?(r.registrationFormSchema=r.registrationFormSchema&&0<r.registrationFormSchema.length?r.registrationFormSchema:r.options.RegistrationFormSchema,function(f){v.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+r.options.apiKey+"&access_token="+e,"",function(g){var h=JSON.parse(JSON.stringify(f));h=x.mapSchema(h,g,"profileeditor");var k=[],l=[],m={};m.Profile=g;m.access_token=e;for(var n=0;n<h.length;n++)h[n].name&&-1==h[n].name.indexOf("emailid")&&-1==h[n].name.indexOf("phoneid")&&k.push(h[n]),h[n].permission&&"h"!=h[n].permission&&l.push(h[n]);x.createForm(k,"profileeditor",a,function(e){y.updateData(m,a,e,b,c,d,k,"profileEditor")},function(a){c(a)},d);(r.options.optionalTwoFactorAuthentication||r.options.twoFactorAuthentication)&&F(a,b,c,d);r.$hooks.call("renderProfileEditorHook",g,l)},"profileEditor")}(r.registrationFormSchema)):c([x.setMappedMessage(G.tokenValid)])}function z(a,b,c,d){if(r.options.disableAccountLinking)r.log(G.disabledAccountLinking);else{var e=a.split(","),f=v.getBrowserStorage(LoginRadiusDefaults.storedTokenName);f?v.ajaxCall("get",LoginRadiusDefaults.apiDomain+"/auth/account?apiKey="+r.options.apiKey+"&access_token="+f,"",function(f){if(f.ErrorCode)c(x.loginRadiusErrorTojsError(f));else if(f.EmailVerified||f.PhoneIdVerified){var g={};if(f.Identities)for(var h=0,k=f.Identities.length;h<k;h++)g[f.Identities[h].Provider]=f.Identities[h].ID;1==e.length?x.renderCustomInterface(a,g,d,"",!0):x.renderCustomInterface(a,g,r.options.linkedAccountsTemplate+","+r.options.notLinkedAccountsTemplate,!0,!0);window.html5passToken=function(a){y.accountLinkingReceiveToken(a,b,c)};r.options.isMobile||r.options.noCallbackForSocialLogin?r.$hooks.register("socialCalls",function(a,d){r.options.noCallbackForSocialLogin&&x.pingForSmartLogin(d,function(a){a.access_token?y.accountLinkingReceiveToken(a.access_token,b,c):b(a)},function(){})}):v.addEvent("message",window,function(a){(-1!=a.origin.indexOf(r.options.customDomain)||-1!=a.origin.indexOf(LoginRadiusDefaults.hubDomain))&&"string"==typeof a.data&&P.test(a.data)&&y.accountLinkingReceiveToken(a.data,b,c)})}else c([x.setMappedMessage(G.unverifiedUser)])},"linkAccount"):c([x.setMappedMessage(G.tokenValid)])}}function E(a,b){var c=[];if(r.options.SecurityQuestions)for(var d=0;d<r.options.securityQuestionsCount;d++){for(var e={type:"option"},f=[],g=0;g<r.options.SecurityQuestions.length;g++){var h={};h.text=r.options.SecurityQuestions[g].Question;h.value=r.options.SecurityQuestions[g].QuestionId;f.push(h)}e.options=f;e.name="securityQuestion"+d;e.display="Security Question";e.rules=b?"optional":"required";e.permission="r";b?a.push(e):c.push(e);e={};e.type=r.options.maskSensitiveInput?"password":"string";e.name="securityAnswer"+d;e.display="Answer";e.rules=b?"optional":"required";e.permission="r";b?a.push(e):c.push(e)}return c}function H(a){if(r.options.duplicateEmailWithUniqueUsername)a=v.findInSchema(a,"name","emailid"),a.display="Username",a.rules="required";else{if(r.options.usernameLogin){var b=v.findInSchema(a,"name","emailid");-1==b.display.indexOf("/Username")&&(b.display+="/Username",b.rules="required")}if(r.options.phoneLogin||r.options.passwordlessLoginOTP)b||(b=v.findInSchema(a,"name","emailid"),b.rules="required"),-1==b.display.indexOf("/Phone")&&(b.display+="/Phone")}}function I(a,b,c,d){if(r.options.securityQuestionEnabled){var e=!0;var f=r.getSecQSchema;H(f);x.createForm(f,"securityquestions",a,function(f){f=v.checkPhoneOrEmailLogin(f);y.getSecurityQuestionsController(f,function(f){0<f.length&&(e=!1);f=v.mergeObjects(r.loginFormSchema,f);r.loginAction||H(f);e?c([x.setMappedMessage(G.noSecurityQuestions)]):x.createForm(f,"resetpwdbysecq",a,function(a){a=v.checkPhoneOrEmailLogin(a);y.resetPasswordBySecurityQuestionController(a,b,c)},function(a){c(a)},d)},function(a){c(a)})},function(a){c(a)},d)}}function R(a,b,c,d){var e=function(e){var f=!0;e=E(e);0<e.length&&(f=!1);f?c([x.setMappedMessage(G.noSecurityQuestions)]):x.createForm(e,"updatesecurityquestion",a,function(a){y.updateSecurityQuestionController(a,b,c)},function(a){c(a)},d)};r.options.securityQuestionEnabled&&(r.registrationFormSchema=r.registrationFormSchema&&0<r.registrationFormSchema.length?r.registrationFormSchema:r.options.RegistrationFormSchema,e(r.registrationFormSchema))}function S(a,b,c,d){var e=v.getHashParam("vtoken"),f=v.getHashParam("vtype");"noregistration"!=f&&"onetouchlogin"!=f||T(e,b,c);e=r.passwordLessLoginSchema;r.options.phoneLogin&&(f=v.findInSchema(e,"name","emailid"),f.display+="/Phone");x.createForm(e,"oneTouchLogin",a,function(e){y.oneTouchLoginController(e,a,b,c,d)},function(a){c(a)},d)}function T(a,b,c){a&&v.ajaxCall("get",LoginRadiusDefaults.apiDomain+
"/auth/email/autologin?apiKey="+r.options.apiKey+"&verificationtoken="+a+"&welcomeEmailTemplate="+r.options.welcomeEmailTemplate,"",function(a){a.ErrorCode?c(x.loginRadiusErrorTojsError(a)):x.loginHandleToken(a,"",b,c)},"smartlogin")}function U(a,b,c,d){var e=r.smartLoginSchema;H(e);x.createForm(e,"smartlogin",a,function(e){e=v.checkPhoneOrEmailLogin(e);-1!==e.indexOf("phone")?y.loginOTPController(e,a,b,c,d):y.smartLoginController(e,b,c)},function(a){c(a)},d)}function J(a,d){d=d||{};var l=d.onSuccess||function(){},p=d.onError||function(){},y=d.container||"",C=d.classPrefix||"",M=d.templateName||"";r.$hooks.register("getCurrentActionOptions",function(b){a==b&&(LRSafarionSuccess=l||function(){},LRSafarionError=p||function(){})});r.getAppConfiguration(function(){"registration"!=a&&"updateSecurityQuestion"!=a&&r.$hooks.call("beforeInit",a);switch(a){case "login":m(y,l,p,C);break;case "registration":var d=setInterval(function(){LoginRadiusDefaults.isRegFormSchemaLock||(LoginRadiusDefaults.isRegFormSchemaLock=!0,r.$hooks.call("beforeInit",a),g(y,l,p,C),clearInterval(d))},1E3);break;case "resetPassword":x.resetPassword(y,l,p,C);break;case "forgotPassword":b(y,l,p,C);break;case "verifyEmail":n(l,p,y,C);break;case "changePassword":c(y,l,p,C);break;case "socialLogin":var N=v.elementById(y);N&&v.addEvent("click",N,function(){LoginRadiusDefaults.socialRegFormId=this.id});LoginRadiusDefaults.socialRegFormId=y;t(y,l,p,C);break;case "linkAccount":z(y,l,p,M);break;case "unLinkAccount":var E=v.unLinkAccount;v.unLinkAccount=function(a,b){E(a,b,l,p)};break;case "profileEditor":A(y,l,p,C);break;case "deleteUser":w(l,p);break;case "deleteUserConfirm":k(l,p);break;case "updatePhone":r.LRCheck2FA=!1;x.updatePhoneNumber(y,l,p,C);break;case "changeUsername":u(y,l,p,C);break;case "resendVerificationEmail":e(y,l,p,C);break;case "addEmail":f(y,l,p,C);break;case "removeEmail":h(y,l,p,C);break;case "createTwoFactorAuthentication":F(y,l,p,C);break;case "backupCodeButton":B(y,l,p,C);break;case "resetBackupCodeButton":D(y,l,p,C);break;case "updateSecurityQuestion":var W=setInterval(function(){LoginRadiusDefaults.isSecurityFormSchemaLock||(LoginRadiusDefaults.isSecurityFormSchemaLock=!0,R(y,l,p,C),clearInterval(W))},1E3);break;case "resetPasswordBySecurityQuestion":I(y,l,p,C);break;case "autoLogin":case "smartLogin":U(y,l,p,C);break;case "noRegistrationPasswordLessLogin":case "onetouchLogin":S(y,l,p,C);break;case "ssoLogin":V(l);break;case "logout":x.logout(l);break;case "ssoNotLoginThenLogout":L(p,l);break;case "instantLinkLogin":case "passwordlessLoginValidate":q(l,p,C);break;default:r.log("This action is not valid.")}})}function V(a){x.validateAndCall(function(){v.jsonpCall("https://"+(r.options.customDomain||r.options.appName+"."+LoginRadiusDefaults.hubDomain)+"/ssologin/login",function(b){b.isauthenticated&&(r.loginRadiusHtml5PassToken?r.loginRadiusHtml5PassToken(b.token):(v.setBrowserStorage(LoginRadiusDefaults.storedTokenName,b.token),r.options.tokenType&&"jwt"==r.options.tokenType.toLowerCase()?(LoginRadiusDefaults.lrResponseCounter++,LoginRadiusDefaults.lrCounterTokenResponse={},x.getJwtToken(b.token,function(c){a(b.token,c)})):a(b.token)))},"ssoLogin")})}function L(a,b){x.validateAndCall(function(){v.jsonpCall("https://"+(r.options.customDomain||r.options.appName+"."+LoginRadiusDefaults.hubDomain)+"/ssologin/login",function(c){if(c.isauthenticated){var d=r.documentCookies.getItem(LoginRadiusDefaults.tokenCookie);if("undefined"==typeof d||null==d)x.setToken(c.token),d=r.documentCookies.getItem(LoginRadiusDefaults.tokenCookie);d&&d!=c.token?(x.setToken(c.token),b(c.token)):(v.setBrowserStorage(LoginRadiusDefaults.storedTokenName,c.token),r.options.tokenType&&"jwt"==r.options.tokenType.toLowerCase()?(LoginRadiusDefaults.lrResponseCounter++,LoginRadiusDefaults.lrCounterTokenResponse={},x.getJwtToken(c.token,function(a){b(c.token,a)})):b(c.token))}else r.documentCookies.removeItem(LoginRadiusDefaults.tokenCookie,r.options.appPath),a()},"ssoNotLoginThenLogout")})}this.global=window;var r=this,x=new setLoginRadiusCommonFunctions(r),y=new LoginRadiusControllers(r,x),K=LoginRadiusDefaults.buttonNames,G=LoginRadiusDefaults.messages,P=LoginRadiusDefaults._uuidFormat,Q=hash.get("lr-token");try{Q&&window.opener&&window.opener.html5passToken&&(window.opener.html5passToken(Q),document.write("<style type='text/css'>body { display: none !important; } </style>"),hash.remove("lr-token"),window.close())}catch(M){}var v=r.util=new LoginRadiusUtility(r,a);v.unLinkAccount=function(a,b,c,d){c=c||function(){};d=d||function(){};if(a&&b){var e={provider:a,providerid:b};(a=v.getBrowserStorage(LoginRadiusDefaults.storedTokenName))?v.ajaxCall("delete",LoginRadiusDefaults.apiDomain+"/auth/socialIdentity?apiKey="+r.options.apiKey+"&access_token="+a,e,function(a){a.ErrorCode?d(x.loginRadiusErrorTojsError(a)):c(a,e)},"unLinkAccount"):onError([x.setMappedMessage(G.tokenValid)])}};LoginRadiusHooksModel(r);var O=!1;setLoginRadiusModuleFunctions(r,a);r.init=function(b,c){r.useraction=b;r.otpSchema=a.maskSensitiveInput?[{type:"password",name:"otp",display:"OTP",rules:"required",permission:"r"}]:[{type:"string",name:"otp",display:"OTP",rules:"required",permission:"r"}];"required"==a.twoFactorAuthentication?(a.twoFactorAuthentication=!0,a.optionalTwoFactorAuthentication=!1):"optional"==a.twoFactorAuthentication&&(a.twoFactorAuthentication=!1,a.optionalTwoFactorAuthentication=!0);"ssoLogin"!==b&&"logout"!==b&&"ssoNotLoginThenLogout"!==b||LoginRadiusDefaults.isSSOInitFired||(LoginRadiusDefaults.isSSOInitFired=!0,r.SSOinitFired=!0);a.appName||r.log("SSO will not work, please set option.appName for SSO");a.formRenderDelay=a.formRenderDelay||0;a.apiKey?0<a.formRenderDelay?setTimeout(function(){J(b,c)},a.formRenderDelay):J(b,c):r.log("API key must be set.")};setLoginRadiusDefaultSchema(r);r.api=new LoginRadiusApiFramework(r,y);return r};